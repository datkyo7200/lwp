"use strict";function videoLayerDirective(w,S,b,_){return{restrict:"A",link:function(i,n,t){var e=!0,a=[],r=[],s=!1,l=b.defer(),o=l.promise,d=!1,u=!0,c=n.children("video");i.arrVideoPlayersState[i.$id]=c[0],i.layer.typeChanged=i.layer.hasOwnProperty("typeChanged")&&i.layer.typeChanged;var m=!(i.layer.created=!1);i.getVideoEnterAnimationLayer=function(e){return e.animation},i.getVideoLeaveAnimationLayer=function(e){return e.leaveAnimation},i.pixelerize=function(e){return parseInt(e)+"px"},i.currentTimer&&(c.on("play",function(){i.data.settings.editMode||i.appliedPauses||i.stopPlayingTimer()}),c.on("pause",function(){i.data.settings.editMode||!i.checkAllPlayers()||i.appliedPauses||i.startPlayingTimer()})),i.$watch("layer.controls",function(){i.data.settings.editMode&&c.attr("controls",i.layer.controls)}),i.layer.clArr=[],i.$watch("layer.classes",function(){var e;i.data.settings.editMode&&(i.layer.classes&&i.layer.clArr.push(i.layer.classes),i.layer.clArr.forEach(function(e){n.removeClass(e)}),n.attr("style",""),n.addClass("ms_video_layer"),i.layer.classes&&n.addClass(i.layer.classes),t.$set("positions",i.layer.position),n.css("opacity","1"),e=b.defer(),i.setElementPosition(n,i.layer,e),r.push(e.promise))});function g(){if(!s||i.data.settings.editMode){s=!0,c.empty();var t=0;if(angular.forEach(i.layer.sources,function(e){e&&t++}),t){var e,a="",n=0;for(e in i.layer.sources)i.layer.sources[e]&&(a+="<source src='"+i.layer.sources[e]+"' type='"+i.getType(i.layer.sources[e])+"'>");c.append(a),c.children("source").each(function(){angular.element(this).one("error",function(){++n===t&&(l.resolve(),l=b.defer())})})}else l.resolve(),l=b.defer();c[0].load(),m=!1}}i.pauseVideo=function(){s&&b.when(o).then(function(){c[0].pause()}),i.layer.autoplay&&d&&(u=!1)},i.seekTo=function(e){s&&b.when(o).then(function(){c[0].currentTime!=e&&(c[0].currentTime=e)})},i.data.settings.editMode||i.addLayerAnimation(i.layer,n),c.on("loadedmetadata",function(){l.resolve(),l=b.defer()}),i.isThisSlideCurrent(n)&&m&&a.push(o),i.$watch("layer.sources",function(){i.data.settings.editMode&&(r.push(l.promise),g())},!0);var p,y=i.$watch("layer.width",function(){n.css("width",i.layer.width[i.layout]),y()}),f=i.$watch("layer.height",function(){n.css("height",i.layer.height[i.layout]),f()});i.$watch("layer.poster",function(){i.data.settings.editMode&&(c.attr("poster",i.layer.poster),c.hide(),p=w(function(){c.show(),w.cancel(p)},0))}),i.data.settings.editMode||(i.animEndListener=function(){i.isThisSlideCurrent(n)?i.layer.autoplay&&!d&&(b.when(o).then(function(){u&&(c.attr("autoplay",i.layer.autoplay),c[0].play())}),d=!0):c.attr("autoplay",!1)},angular.forEach(_.leaveEventNamesArr,function(e){n[0].addEventListener(e,i.animEndListener,!1)})),i.manipulate=function(e){var t,a=!1;for(t in e.hasOwnProperty("type")&&!angular.equals(i.layer.type,e.type)&&(i.layer.typeChanged=!0),e)a||angular.equals(i.layer[t],e[t])||(a=!0),i.layer[t]=e[t];a?i.$apply():n.parent().trigger("MPSLLayerChange"),i.layer.changed=!0},i.delete=function(e){i.data.slides[0].layers.splice(e.$index,1),i.$apply()},i.getSrc=function(e){if(angular.isDefined(e))return 0!==e.length?S.trustAsResourceUrl(e):""},i.getType=function(e){if(angular.isDefined(e)){var t=e.split(".").pop();t=t.split("?")[0].split("#")[0];return 0!==e.length?"video/"+("ogv"===t?"ogg;":t+";"):""}},i.getVideoAutoplay=function(e){return e.autoplay},i.getVideoControls=function(e){return e.controls},i.getVideoLoop=function(e){return e.loop},i.getVideoMuted=function(e){return e.mute},i.percentage=function(e){return parseInt(e)+"%"},i.delayValidation=function(e){return parseInt(e)+"ms"},i.getWidth=function(e){return e.width},i.setVideoAttrs=function(){for(var e in i.currentVideoAttrs={controls:i.layer.controls,loop:i.layer.loop,poster:i.layer.poster},i.currentVideoAttrs)i.currentVideoAttrs[e]&&c.attr(e,i.currentVideoAttrs[e]);c[0].muted=i.layer.mute},n.addClass(i.layer.classes),i.data.settings.editMode?(c[0].pause(),c.attr("controls",i.getVideoControls(i.layer)),c.attr("poster",i.layer.poster),n.css("opacity",1)):i.setVideoAttrs(),i.initStyles(i.layer,n),n.data("mpsl_positions",i.layer.position);var h=b.defer();b.when(o).then(function(){i.calculationOfPosition(i.layer.position,i.layer,n,n.parents("#"+i.getCurrentScope())),h.resolve()}),i.isThisSlideCurrent(n)&&a.push(h.promise),i.$watch("currentIndex",function(){i.isThisSlideCurrent(n)&&(i.data.settings.editMode||i.layer.autoplay&&!d&&i.stopPlayingTimer())}),i.$watch("[data.settings.timer, currentIndex]",function(){i.isThisSlideCurrent(n)&&m&&g(),parseInt(n.parents(".ms_repeater").data("currentIndex"))===parseInt(i.currentIndex)?i.data.settings.editMode||i.layer.applyLeave&&(i.animationDelaySet=!1,i.layer.enter(),i.setVideoAttrs(),i.layer.applyLeave=!1):i.layer.applyLeave=!0,i.data.settings.timer?parseInt(n.parents(".ms_repeater").data("currentIndex"))===parseInt(i.currentIndex)&&(w.cancel(i.layer.layerTimerLeave),i.layer.autoplay&&!d&&i.stopPlayingTimer(),i.applyLAnimation(i,n)):(w.cancel(i.layer.layerTimerLeave),null!==i.layer.leaveDelay&&parseInt(n.parents(".ms_repeater").data("currentIndex"))===parseInt(i.currentIndex)&&(i.data.settings.editMode||(i.layer.layerTimerLeave=w(function(){i.layer.applyLeave=!1,w.cancel(i.layer.layerTimerLeave)},i.layer.leaveDelay))))},!0);var v=b.defer();b.all(a).then(function(){v.resolve(),i.layer.typeChanged||(i.layer.created=!0),n.parent().trigger(i.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),i.deferred.push(v.promise),i.data.settings.editMode&&i.$watch("[layer.type, layer.sources, layer.width, layer.height, layer.controls, layer.classes, layer.poster]",function(){e?e=!1:b.all(r).then(function(){n.parent().trigger("MPSLLayerChange"),r=[]})},!0)}}}!function(){function r(){}r.prototype.getSliderManager=function(e){if(e){e=angular.element(e).children(".ms_wrapper");if(e.length)return e.scope().SliderManager}return null},r.prototype.initSlider=function(e){angular.element(e).data("ms-inited",!0);var t=angular.element(e).children(".motoslider").find("#settings"),a=t.data("scrollInit"),n=t.data("delayInit"),t=!!angular.isDefined(t.data("edit-mode"))&&t.data("edit-mode"),i=function(){angular.element(e).data("ms-inited")&&angular.element(e).offset().top+angular.element(e).outerHeight()<=angular.element(window).scrollTop()+angular.element(window).height()&&(angular.element(window).off("scroll",i),r.bootstrapSlider(e,n),angular.element(e).data("ms-inited",!1))};a&&!t?(i(),angular.element(window).on("scroll",i)):r.bootstrapSlider(e,n)},r.bootstrapSlider=function(e,t){var a;t?a=setTimeout(function(){n(e),clearTimeout(a)},t):n(e)};var n=function(e){var t,a,n,i;angular.isUndefined(angular.element(e).scope())&&(t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=angular.element(e).children(".motoslider").find("#settings"),a=!!angular.isDefined(i.data("edit-mode"))&&i.data("edit-mode"),n=angular.isDefined(i.data("visible-from"))&&""!==i.data("visible-from")?i.data("visible-from"):null,i=angular.isDefined(i.data("visible-till"))&&""!==i.data("visible-till")?i.data("visible-till"):null,a||null===n&&null===i||null===n&&t<=i||null===i&&n<=t||n<=t&&t<=i?angular.bootstrap(e,["motosliderApp"]):angular.element(e).addClass("motoslider-hide"))};window.MPSLManager=new r}(),angular.module("templates-main",["../app/views/template.html"]),angular.module("../app/views/template.html",[]).run(["$templateCache",function(e){e.put("../app/views/template.html",'<div data-scope=\'{{ id }}\' ms-slider  id="{{ $id }}" ng-cloak\n     class="ms_wrapper" ng-class="[\'ms_to_right\', \'turnApply\', \'applySlides\', data.settings.customClass]"\n     data-ng-init="initSlider()" ms-swipe>\n        <div ms-slide-repeater ng-repeat="slide in data.slides track by $index" ng-show="isCurrentIndex($index)"\n             data-current-index="{{$index}}" class="ms_slide ms_repeater ms_optimize" id="{{slide.general.id}}"\n             ng-class="[isCurrentIndexFirst($index) && \'ms_current_slide ms_show\', isCurrentIndexFirst($index) && data.defaults.animatedClass, slide.general.classes]">\n            <a ng-if="slide.general.link.length" href="{{slide.general.link}}"\n               class="ms_slide_link {{slide.general.link_class}}" id="{{slide.general.link_id}}"\n               rel="{{slide.general.link_rel}}" target="{{slide.general.link_target}}"\n               title="{{slide.general.link_title}}"></a>\n\n            <div class="ms_slide_wrapper" ms-slide>\n\n                <div class="ms_color" ng-if="isSlideBgType(\'color\')" ms-slide-color ng-style="getStyles()"></div>\n\n                <div class="ms_gradient" ng-if="isSlideBgType(\'gradient\')" ms-slide-gradient\n                     ng-style="getStyles()"></div>\n\n                <div class="ms_image" ng-if="isSlideBgType(\'image\')" ms-slide-image ng-style="getStyles()"></div>\n\n                <div class="ms_video_background" ng-if="isSlideBgType(\'video\') && !detectMobile" ms-slide-video\n                     ng-style="getStyles()"></div>\n                \x3c!--            <div class="ms_video_background" ng-if="isSlideBgType(\'video\')">\n                                <video ms-slide-video ng-if="slide.backgrounds.video.showVideo" ng-style="getStyles()" preload>\n                                    <source ng-repeat="s in slide.backgrounds.video.sources" ng-src="{{ getSrc(s)}}" type="{{ getType(s)}}" />\n                                </video>\n                            </div>--\x3e\n\n                \x3c!--<iframe class="ms_youtube" ms-slide-youtube ng-style="getStyles()" frameborder="0" allowscriptaccess="always"></iframe>--\x3e\n\n                \x3c!--<div class="ms_parallax_wrapper" ng-if="isSlideParallax(slide)" >--\x3e\n                \x3c!--<div ms-slide-parallax class="ms_parallax"  ng-if="isSlideParallax(slide)" data-jkit="[parallax:strength=1;axis=both;detect=mousemove;scope=local;]"  ng-style="getStyles()">--\x3e\n                \x3c!--<div  data-ng-repeat="p in slide.parallaxSettings.parallaxLayers"  ng-bind-html="p.content | parallaxValidate" class="ms_parallax" data-ng-class="{ {{p.class}} : true }" ms-size="{{p.size}}" ms-resize-parallax-element ></div>--\x3e\n                \x3c!--</div>--\x3e\n                \x3c!--</div>--\x3e\n\n            </div>\n\n\n            <div class="ms_layers_wrapper">\n\n            <div class="layers" ng-repeat="(layerKey, layer) in slide.layers  track by $id(layer)"\n                 ng-style="{\'z-index\' : \'{{layerKey + 100}}\'}" ng-show="isHideWidth(layer)">\n                \x3c!--<div class="layers" ng-repeat="layer in slide.layers" >--\x3e\n                <a ng-if="isLayerType(\'image\') && (layer.link || data.settings.editMode)"\n                   class="ms_layer ms_image_layer"\n                    ms-image-layer ms-layer>\n                    <img/>\n                </a>\n                <img ng-if="isLayerType(\'image\') && !layer.link && !data.settings.editMode"\n                     class="ms_layer ms_image_layer"\n                      ms-image-layer ms-layer/>\n\n                <a ng-if="isLayerType(\'button\')" class="ms_layer ms_button_layer" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ms-button-layer\n                   ms-layer></a>\n\n                <div ng-if="isLayerType(\'video\') && disableMobileCheck(layer.disableMobile)" ms-video-layer ms-layer\n                     ng-style="getStyles()" class="ms_layer ms_video_layer" >\n                    <video preload="true">\n                    </video>\n                </div>\n                <div ng-if="isLayerType(\'youtube\') && disableMobileCheck(layer.disableMobile)" ms-youtube-layer ms-layer\n                     class="ms_layer ms_youtube_layer"  ng-style="getStyles()">\n                    <iframe id="{{ $id }}"></iframe>\n                    <div ng-if="layer.preview_image.length" class="ms_youtube_layer_preview_image"\n                         ng-style="{\'background-image\':\'url(\\\'\' + layer.preview_image + \'\\\')\'}">\n                        <div class="ms_youtube_layer_preview_button" ng-click="clickPreviewButton()"></div>\n                    </div>\n                </div>\n                <div ng-if="isLayerType(\'vimeo\') && disableMobileCheck(layer.disableMobile)" ms-vimeo-layer ms-layer\n                     ng-style="getStyles()" class="ms_layer ms_vimeo_layer" >\n                    <iframe></iframe>\n                    <div ng-if="layer.preview_image.length" class="ms_vimeo_layer_preview_image"\n                         ng-style="{\'background-image\':\'url(\\\'\' + layer.preview_image + \'\\\')\'}">\n                        <div class="ms_vimeo_layer_preview_button" ng-click="clickPreviewButton()"></div>\n                    </div>\n                </div>\n                <div ng-if="isLayerType(\'html\')" class="ms_layer ms_html_layer" data-ng-bind-html="trustedHtml" ms-html-layer ms-layer></div>\n                \x3c!--<div ng-if="isLayerType(\'html\')" class="ms_layer ms_html_layer" data-ng-bind-html="layer.content" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ms-html-layer ms-layer></div>--\x3e\n            </div>\n\n            </div>\n        </div>\n\n        <div class="ms_counter mpsl-controls-show-hide" ng-show="isCounter()  && sliderMouseEnter">\n            <span ms-counter></span>\n        </div>\n        <div class="ms_pagination mpsl-controls-show-hide ms_control_show"\n             ng-show="showPagination() && sliderMouseEnter">\n            <div class="ms_bullet_wrapper">\n                <a ng-repeat="slide in data.slides" href="javascript:void(0)" class="ms_bullet "\n                   ng-class="{ ms_active : isCurrentIndex($index) }" ng-click="changeSlideManualy($index)"\n                   index="{{ $index}}" pagination-control>\n                    <div ng-class="{ms_thumbnail : data.settings.thumbnails}">\n                        <div></div>\n                    </div>\n                </a>\n            </div>\n        </div>\n        <div class="ms_arrows">\n            <a href="javascript:void(0)" class="ms_prev mpsl-controls-show-hide"\n               ng-show="data.settings.arrowsShow && sliderMouseEnter" navigation-control="prev"></a>\n            <a href="javascript:void(0)" class="ms_next mpsl-controls-show-hide"\n               ng-show="data.settings.arrowsShow && sliderMouseEnter" navigation-control="next"></a>\n            <a href="javascript:void(0)" class="ms_start_pause mpsl-controls-show-hide"\n               ng-show="!data.settings.hoverTimer && data.settings.slideshowPPBShow && disableMobileCheck(true) && sliderMouseEnter"\n               ms-start-pause></a>\n            \x3c!-- <div id="ms_timer_container"></div> --\x3e\n            <div class="ms_banner_timer" ng-show="::data.settings.slideshowTimerShow">\n                <div class="ms_banner_inner"></div>\n            </div>\n        </div>\n        <div class="ms_preload_wrapper ms_active"></div>\n</div>\n\n')}]),angular.module("motosliderApp",["ngAnimate","ngTouch","templates-main"]).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|javascript|tel):/)}]),angular.element(document).ready(function(){angular.element(".motoslider_wrapper").each(function(){MPSLManager.initSlider(this)})}),function(){angular.module("motosliderApp").factory("detectMobileDevice",function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0);return e}).factory("bgImageSettings",function(){return{defaultFit:"cover",defaultPosition:"center top",defaultRepeat:"no-repeat",defaultFitPercentage:{x:100,y:100},defaultPositionPercentage:{x:0,y:0}}}).constant("listStyles",["padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-left-width","border-right-width","border-bottom-width","margin-top","margin-left","margin-right","margin-bottom","letter-spacing","font-size","line-height","text-align"]).constant("listStylesStatic",[]).constant("listLayouts",["desktop","notebook","tablet","mobile"]).constant("listFontStyles",["font-size","line-height","text-align"]).constant("listStylesUnit",{"line-height":"px"}).constant("listLayer",["width","height","whiteSpace"]).constant("layout",{desktop:{width:1240,height:868},notebook:{width:1024,height:768},tablet:{width:778,height:960},mobile:{width:480,height:720}}).factory("defaultSettingsSlide",function(){return{class:"",id:"",link:"",link_target:"_blank",link_id:"",link_class:"",link_rel:"",link_title:""}}).factory("defaultSettingsVideoBG",function(){return{autoplay:!0,mute:!1,loop:!0,controls:!1,fillmode:"fill",cover:!1,cover_type:""}}).factory("defaultSettingsVideo",function(){return{autoplay:!1,mute:!1,loop:!1,controls:!0,poster:""}}).factory("defaultSettingsGradient",function(){return{position:"45deg",colorInitial:"#ffffff",colorFinal:"#ffffff"}}).factory("defaultLeaveAnimationLayers",function(){return{animation:"bounceOut"}}).factory("toJson",function(){return function(e){if(e.length)return JSON.parse(e.replace(/'/g,'"'))}}).service("styleService",e).service("newLayoutService",t).constant("defaults",{sliderSettings:{customClass:"",arrowsShow:!0,thumbnailsShow:!0,slideshowTimerShow:!0,slideshowPPBShow:!0,controlsHideOnLeave:!1,visibleFrom:null,visibleTill:null},allWidth:window.innerWidth,height:800,heightYoutube:250,widthYoutube:400,heightVimeo:250,widthVimeo:400,slideAnimation:"bounceIn",timer:!1,timerDelay:5e3,timerReverse:!1,counter:!1,fullWindowResize:!1,fullWindowHeight:!1,fullHeightOffset:0,fullSizeGrid:!1,showThumbnails:!1,slideEnterAnimation:"msSlide",slideLeaveAnimation:"msSlide",slideDuration:1e3,slideEasing:"linear",layerDelay:500,layerAnimation:"fadeIn",bgColorSlide:"#c3c3c3",layerWidth:350,layerHeight:250,settingsYoutubeSlide:{controls:!1},hoverTimer:!1,startSlide:0,slideDelay:1500,leaveEventNamesArr:["webkitAnimationEnd","animationend","MSAnimationEnd","oanimationend"],info:"undefined"==typeof MPSLCore?{path:"",version:"2.1.0"}:MPSLCore,animatedClass:"mpsl-animated",animationClassPrefix:"mpsl-",layerShowClass:"mpsl-layer-show",layerHideClass:"mpsl-layer-hide",videoBackground:"images/default-video.png",magicRedrawDelay:550,bannerDelay:1300,swipe:!0,animationDuration:1e3,animationLeaveDuration:1e3,animationTimingFunction:"mpsl-linear",animationLeaveTimingFunction:"mpsl-linear",swipeTimeLimit:700,swipeTransitionDuration:700,swipeWidthLimit:4,swipeTime:300,scrollInit:!1,delayInit:0,whiteSpace:"normal",whiteSpaceVariations:["normal","nowrap"],whiteSpacePrefix:"mpsl-white-space-",resizable:!0,dontChangePosition:!1,hideWidth:!1});var l=function(e){e.addClass("ms_block_transition")},u=function(e){e.removeClass("ms_block_transition")};function e(n,o,d,s){this.parseUnits=function(e){return e.match(/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/)},this.explode=function(e){for(var t={},a=0;a<=n.length-1;a++)t[n[a]]=e.css(n[a]).toString();return t},this.set=function(e,t,a,n,i){for(var r in e){var s,l;e.hasOwnProperty(r)&&(n||e[r]?(s=this.parseUnits(e[r]))?(l=-1===o.indexOf(r)?a:1,!s[2]&&d.hasOwnProperty(r)&&(s[2]=d[r]),l=s[2]?s[1]*l+s[2]:s[1]*l,l=this.fixValue(r,l),t.css(r,l)):t.css(r,e[r]):i&&t.css(r,""))}},this.fixValue=function(e,t){return t},this.htmlLayer=function(t,a,e){function n(){e&&t.layer.dontChangePosition||t.changePos(t.layer,a),u(a)}var i,r;l(a),!e||t.layer.resizable?(r=a.find("*:not(br,hr)"),i=[],r.length&&(t.resetStyles(t.layer,a),angular.forEach(r,function(e){!0!==t.changeStyles(t.layer,angular.element(e),!0,!0)&&i.push()})),r=function(){var e=t.changeStyles(t.layer,a,!1,!0);!0===e?n():e.then(n)},i.length?s.all(i).then(r):r()):n()},this.layer=function(e,t,a){function n(){a&&e.layer.dontChangePosition||e.changePos(e.layer,t),u(t)}var i;l(t),a&&!e.layer.resizable||!0===(i=e.changeStyles(e.layer,t,!1,!0))?n():i.then(n)}}function t(i,r){this.get=function(e){return{desktop:e=void 0===e?"":e,notebook:e,tablet:e,mobile:e}},this.getStyles=function(){for(var e={},t=0;t<i.length;t++){for(var a={},n=0;n<r.length;n++)a[r[n]]="";e[i[t]]=a}return e}}e.$inject=["listStyles","listStylesStatic","listStylesUnit","$q"],t.$inject=["listLayouts","listFontStyles"]}(),function(){function e(e,L,l,I,o,d,T,u,x,E,t){function A(e,t){function a(e,t){return e&&(t?parseInt(e):e.toString())}return t=t||!1,{desktop:a(e[0],t),notebook:a(e[1],t),tablet:a(e[2],t),mobile:a(e[3],t)}}function P(e,t){if(void 0===angular.element(e).data(t))return!1;var a=angular.element(e).data(t).toString().split(";"),t=Object.keys(E).length;if(a.length<t)for(var n=t-a.length,i=a.length-1;n--;)a.push(a[i]);return a}var a,n=e.children(".motoslider"),e=n.children("#settings"),n=n.children("#slides").find(".slide"),c=[],M=e.data(),D=!!angular.isDefined(M.editMode)&&M.editMode;n.each(function(e,t){var k,a=angular.element(t),n=a.find(".slide_bg"),t=a.find(".layers");0!==t.length&&(t=t.find(".layer"),k=[],t.each(function(e,t){function a(e){return{"font-size":g[e],"line-height":p[e].toString(),"text-align":y[e].toString()}}var n,i,r=angular.element(t).data("type"),s=P(t,"align-horizontal"),l=P(t,"align-vertical"),o=P(t,"offset-x"),d=P(t,"offset-y"),u=P(t,"width"),c=P(t,"height"),m=P(t,"white-space"),g=P(t,"font-size"),p=P(t,"line-height"),y=P(t,"text-align"),f={desktop:a(0),notebook:a(1),tablet:a(2),mobile:a(3)},h={type:r,animation:L.animationClassPrefix+angular.element(t).data("animation")||L.layerAnimation,leaveAnimation:L.animationClassPrefix+angular.element(t).data("leaveAnimation")||T.animation,delay:angular.element(t).data("delay")||L.layerDelay,leaveDelay:angular.element(t).data("leaveDelay")||null,duration:angular.element(t).data("duration")||L.animationDuration,leaveDuration:angular.element(t).data("leaveDuration")||L.animationLeaveDuration,timingFunction:"mpsl-"+angular.element(t).data("timingFunction")||null,leaveTimingFunction:"mpsl-"+angular.element(t).data("leaveTimingFunction")||null,classes:angular.element(t).data("class"),whiteSpace:(n=A(m),i=L.whiteSpace,"object"==typeof n&&angular.forEach(n,function(e,t){void 0===e&&(n[t]=i)}),n),position:{"align-horizontal":A(s),"align-vertical":A(l),"offset-x":A(o,!0),"offset-y":A(d,!0)},styles:{desktop:a(0),notebook:a(1),tablet:a(2),mobile:a(3)},originalStyles:f,resizable:angular.isDefined(angular.element(t).data("resizable"))?!!angular.element(t).data("resizable"):L.resizable,dontChangePosition:angular.element(t).data("dontChangePosition")||L.dontChangePosition,hideWidth:angular.element(t).data("hideWidth")||L.hideWidth};switch(r){case"image":h.linkClasses=angular.element(t).data("link-class"),h.target=angular.element(t).data("target"),h.link=angular.element(t).data("link").trim()||"",h.width=A(u,!0),h.height=A(c,!0);var v={},w=angular.element(t).find("img");angular.isDefined(w)&&w.length&&(angular.forEach(angular.element(t).find("img")[0].attributes,function(e){v[e.name]=e.value}),delete v.width,delete v.height,D&&(delete v.srcset,delete v.sizes),h.imgAttrs=v),h.src=angular.isDefined(v.src)&&v.src.length?v.src:"";break;case"button":h.title=angular.element(t).text(),h.size=angular.element(t).data("size"),h.target=angular.element(t).data("target"),h.link=angular.element(t).data("link"),h.width=A(u,!0),h.height=A(c,!0);break;case"html":angular.isDefined(M.layoutDesktopWidth)?M.layoutDesktopWidth:E.desktop.width;var S=M.layoutNotebookWidth||E.notebook.width,b=M.layoutTabletWidth||E.tablet.width,_=M.layoutMobileWidth||E.mobile.width,C=null,w=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,C=w<=_?"mobile":_<w&&w<=b?"tablet":b<w&&w<=S?"notebook":"desktop";h.classes=L.whiteSpacePrefix+h.whiteSpace[C]+" "+h.classes,h.content=angular.element(t).html(),h.width=A(u,!0),h.height=A(c,!0);break;case"video":h.sources={src_webm:angular.element(t).data("src-webm"),src_mp4:angular.element(t).data("src-mp4"),src_ogv:angular.element(t).data("src-ogv")},h.width=A(u,!0),h.height=A(c,!0),h.format=angular.element(t).data("format"),h.poster=angular.element(t).data("poster"),h.autoplay=angular.element(t).data("autoplay")&&!x||I.autoplay,h.loop=angular.element(t).data("loop")||I.loop,h.controls=angular.isDefined(angular.element(t).data("controls"))?angular.element(t).data("controls"):I.controls,h.mute=angular.element(t).data("mute")||I.mute,h.fullWidth=angular.element(t).data("fullWidth"),h.disableMobile=angular.element(t).data("disableMobile")||!1;break;case"vimeo":case"youtube":h.src=angular.element(t).data("src"),h.width=A(u,!0),h.height=A(c,!0),h.autoplay=angular.element(t).data("autoplay")&&!x||I.autoplay,h.loop=angular.element(t).data("loop")||I.loop,h.controls=angular.isDefined(angular.element(t).data("controls"))?angular.element(t).data("controls"):I.controls,h.mute=angular.element(t).data("mute")||I.mute,h.poster=angular.element(t).data("poster")||I.poster,h.disableMobile=angular.element(t).data("disableMobile")||!1}k.push(h)}));var i,r,s={};n.children().each(function(e,t){t=angular.element(t),i={},"image"===(r=t.data("type"))?i={fit:t.data("fit")||u.defaultFit,fitX:t.data("fit-x")||u.defaultFitPercentage.x,fitY:t.data("fit-y")||u.defaultFitPercentage.y,positionX:t.data("position-x")||u.defaultPositionPercentage.x,positionY:t.data("position-y")||u.defaultPositionPercentage.y,position:t.data("position")||u.defaultPosition,repeat:t.data("repeat")||u.defaultRepeat,src:angular.isDefined(t.data("src"))&&0!==t.data("src").length?t.data("src"):null,thumbnail:angular.isDefined(t.data("thumbnail"))&&0!==t.data("thumbnail").length?t.data("thumbnail"):null,title:t.data("title"),format:t.data("format"),controls:t.data("controls")||I.controls}:"video"===r?(angular.isDefined(t.data("src-webm"))||angular.isDefined(t.data("src-mp4"))||angular.isDefined(t.data("src-ogg")))&&(i={showVideo:!0,sources:{webm:t.data("src-webm"),mp4:t.data("src-mp4"),ogg:t.data("src-ogg")},controls:t.data("controls")||I.controls,loop:angular.isDefined(t.data("loop"))?t.data("loop"):o.loop,mute:angular.isDefined(t.data("mute"))?t.data("mute"):o.mute,fillmode:angular.isDefined(t.data("fillmode"))?t.data("fillmode"):o.fillmode,cover:angular.isDefined(t.data("cover"))?t.data("cover"):o.cover,cover_type:angular.isDefined(t.data("cover-type"))?t.data("cover-type"):o.cover_type,autoplay:angular.isDefined(t.data("autoplay"))&&!x?t.data("autoplay"):o.autoplay}):"color"===r?i={thumbnail:angular.isDefined(t.data("thumbnail"))&&0!==t.data("thumbnail").length?t.data("thumbnail"):null,color:t.data("color")||L.bgColorSlide}:"youtube"===r?i={thumbnail:angular.isDefined(t.data("thumbnail"))&&0!==t.data("thumbnail").length?t.data("thumbnail"):null,src:t.data("src"),controls:t.data("controls")||L.settingsYoutubeSlide.controls}:"gradient"===r?i={thumbnail:angular.isDefined(t.data("thumbnail"))&&0!==t.data("thumbnail").length?t.data("thumbnail"):null,position:t.data("position")||d.position,colorInitial:t.data("colorInitial")||d.colorInitial,colorFinal:t.data("colorFinal")||d.colorFinal}:"color"===r&&(i={thumbnail:angular.isDefined(t.data("thumbnail"))&&0!==t.data("thumbnail").length?t.data("thumbnail"):null,color:t.data("color")}),Object.keys(i).length&&(s[r]=i,s[r].type=r)}),c.push({general:{animation:a.data("animation")||L.slideEnterAnimation,fadeAnimation:a.data("fade-animation")||L.slideLeaveAnimation,duration:a.data("duration")||L.slideDuration,easing:a.data("easing")||L.slideEasing,classes:a.data("class")||l.class,id:a.data("id")||l.id,link:a.data("link")||l.link,link_target:a.data("link-target")||l.link_target,link_id:a.data("link-id")||l.link_id,link_class:a.data("link-class")||l.link_class,link_rel:a.data("link-rel")||l.link_rel,link_title:a.data("link-title")||l.link_title},backgrounds:s,layers:k})}),angular.isDefined(M.startSlide)&&(a=L.startSlide,(r=M.startSlide)&&r<=c.length&&(a=r<0?0:r-1));angular.isDefined(M.fullHeightOffset)&&0<M.fullHeightOffset&&M.fullHeightOffset;var i={};i.value=M.fullHeightOffset||0,i.container=M.fullHeightOffsetContainer||L.fullHeightOffset,i.units="px",i.height=0;var r=function(e){0<i.value.search(e)&&(i.units=e,i.height=i.value.slice(0,"px"===e?-2:-1))};i.value&&(r("px"),r("%"));for(var s=M.layout,m={},g=0;g<=3;g++)m[t[g]]=!0;if(s&&1<(s=s.toString().split(";")).length)for(var p=0;p<=s.length-1;p++)m[t[p]]=0===p||"true"===s[p];var y={settings:{editMode:D,timer:(angular.isDefined(M.timer)?M:L).timer,timerDelay:(angular.isDefined(M.timerDelay)?M:L).timerDelay,timerReverse:(angular.isDefined(M.timerReverse)?M:L).timerReverse,counter:(angular.isDefined(M.counter)?M:L).counter,fullWidth:angular.isDefined(M.fullWindowWidth)?M.fullWindowWidth:L.fullWindowResize,fullHeight:angular.isDefined(M.fullHeight)?M.fullHeight:L.fullWindowHeight,fullSizeGrid:(angular.isDefined(M.fullSizeGrid)?M:L).fullSizeGrid,offsetSettings:i,thumbnails:(angular.isDefined(M.showThumbnails)?M:L).showThumbnails,hoverTimer:(angular.isDefined(M.hoverTimer)?M:L).hoverTimer,grid:{desktop:{width:angular.isDefined(M.layoutDesktopWidth)?M.layoutDesktopWidth:E.desktop.width,height:angular.isDefined(M.layoutDesktopHeight)?M.layoutDesktopHeight:E.desktop.height},notebook:{width:angular.isDefined(M.layoutNotebookWidth)?M.layoutNotebookWidth:E.notebook.width,height:angular.isDefined(M.layoutNotebookHeight)?M.layoutNotebookHeight:E.notebook.height},tablet:{width:angular.isDefined(M.layoutTabletWidth)?M.layoutTabletWidth:E.tablet.width,height:angular.isDefined(M.layoutTabletHeight)?M.layoutTabletHeight:E.tablet.height},mobile:{width:angular.isDefined(M.layoutMobileWidth)?M.layoutMobileWidth:E.mobile.width,height:angular.isDefined(M.layoutMobileHeight)?M.layoutMobileHeight:E.mobile.height}},minHeight:angular.isDefined(M.minHeight)?M.minHeight:"500",isSingleSlide:1===c.length,isSlideshowEnabled:(angular.isDefined(M.timer)?M:L).timer,swipe:(angular.isDefined(M.swipe)?M:L).swipe,customClass:(angular.isDefined(M.customClass)?M:L.sliderSettings).customClass,arrowsShow:(angular.isDefined(M.arrowsShow)?M:L.sliderSettings).arrowsShow,thumbnailsShow:(angular.isDefined(M.thumbnailsShow)?M:L.sliderSettings).thumbnailsShow,slideshowTimerShow:(angular.isDefined(M.slideshowTimerShow)?M:L.sliderSettings).slideshowTimerShow,slideshowPPBShow:angular.isDefined(M.slideshowPpbShow)?M.slideshowPpbShow:L.sliderSettings.slideshowPPBShow,controlsHideOnLeave:(angular.isDefined(M.controlsHideOnLeave)?M:L.sliderSettings).controlsHideOnLeave,visibleFrom:(angular.isDefined(M.visibleFrom)&&""!==M.visibleFrom?M:L.sliderSettings).visibleFrom,visibleTill:(angular.isDefined(M.visibleTill)&&""!==M.visibleTill?M:L.sliderSettings).visibleTill,scrollInit:(angular.isDefined(M.scrollInit)?M:L).scrollInit,delayInit:(angular.isDefined(M.delayInit)?M:L).delayInit,startSlide:a,availableLayouts:m},defaults:L,slides:c};return y.settings.slideAnimation=y.slides[0].general.animation,y.settings.slideDuration=y.slides[0].general.duration,y.settings.slideEasing=y.slides[0].general.easing,{getData:function(){return y}}}angular.module("motosliderApp").factory("parseData",e),e.$inject=["$rootElement","defaults","defaultSettingsSlide","defaultSettingsVideo","defaultSettingsVideoBG","defaultSettingsGradient","defaultLeaveAnimationLayers","bgImageSettings","detectMobileDevice","layout","listLayouts"]}(),function(){function e(S,n,r,e,l,t,b,c,d,a,i,g,_,o,s,u){S.data=e.getData(),S.detectMobile=a,S.bannerLine=d.find(".ms_banner_inner"),S.ppButton=d.find(".ms_start_pause"),S.bullets=d.find(".ms_pagination"),S.arrows=d.find(".ms_arrows"),S.slideAnimationDefer=b.defer(),S.slideAnimationEnd=S.slideAnimationDefer.promise,S.slideAnimating=!1,S.isHover=!1,S.isDecrease=!1,S.isIncrease=!1,S.layout=null,S.grid=S.data.settings.grid,S.setLayoutType=function(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=0,i=9999,r="desktop",s="desktop";angular.forEach(S.data.settings.grid,function(e,t){S.data.settings.availableLayouts[t]&&(e.width>=a&&(i=n=e.width,r=t),e.width<=a&&e.width>n&&(n=e.width,s=t))}),o=n<i?s:r,void 0!==S.prevLayout&&o===S.prevLayout||(S.layout=o,S.prevLayout=o)},S.sliderMouseEnter=!S.data.settings.controlsHideOnLeave,S.currentTimer=S.data.settings.timer,S.firstSlideLoaded=!1;var m,p=b.defer();S.sliderLoaded=p.promise,S.isTouchDevice="ontouchstart"in window||void 0!==window.navigator.maxTouchPoints&&0<navigator.maxTouchPoints||void 0!==window.navigator.msMaxTouchPoints&&0<window.navigator.msMaxTouchPoints;var y=!1;S.$$postDigest(function(){S.data.settings.editMode?S.layout="desktop":S.setLayoutType(),S.sliderWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,y||(m=d.find(".ms_layers_wrapper"),h()),m.css("width","100%"),b.all(S.deferred).then(function(){d.find(".ms_wrapper").css("opacity",1),d.find(".ms_preload_wrapper").removeClass("ms_active"),angular.element(d.find(".ms_repeater")[S.data.settings.startSlide]).addClass("ms_active"),S.firstSlideEnded=!1,MPSLManager.swiped=!1,S.bullets.removeClass("ms_control_show"),S.tempTimerForVideo=!0;var e=S.resizeSliderElements();d.trigger("MPSliderBeforeLoad"),b.all(e).then(function(){d.trigger("MPSliderLoad"),p.resolve()}),(S.data.settings.timer||S.data.settings.timer&&S.data.settings.hoverTimer)&&(S.ppButton.addClass("ms_pause"),S.startTimer()),d.addClass("ms_loaded")})});function f(){S.data.settings.fullSizeGrid||m.css("max-width",S.data.settings.grid[S.layout].width)}var h=function(){f();S.$watch("layout",function(){f()});y=!0};S.getCurrentScope=function(){return S.$id},S.currentIndex=S.data.settings.startSlide,S.testManual=!1,S.reInitTimer=function(){S.currentTimer&&S.data.settings.timer?(S.data.settings.timer=!0,S.ppButton.hasClass("ms_pause")||S.ppButton.addClass("ms_pause")):(S.data.settings.timer=!1,S.ppButton.hasClass("ms_pause")&&S.ppButton.removeClass("ms_pause"))},S.changeSlideManualy=function(e){if(e===S.currentIndex)return!1;S.slideAnimationDefer.reject(),S.slideAnimationDefer=b.defer(),S.slideAnimationEnd=S.slideAnimationDefer.promise,S.reInitTimer(),S.pauseProgressBar(),l.cancel(S.motoTimer),S.currentEndTime=0,S.diffStartStop=0,S.addLeaveAnimation();var t=S.getDelayBeforeSlideChange();S.paginateSlide=l(function(){parseInt(e)>parseInt(S.currentIndex)?S.setRightClass():parseInt(e)<parseInt(S.currentIndex)&&S.setLeftClass(),S.currentIndex=e,S.quickScroll=!1,MPSLManager.swiped=!1,S.appliedPauses=!1,l.cancel(S.paginateSlide),l.cancel(S.motoTimer),S.currentEndTime=0,S.data.settings.timer?MPSLManager.swiped||"msSlideFade"===S.data.settings.slideAnimation?S.startTimer():b.when(S.slideAnimationEnd).then(function(){S.startTimer()}):S.reInitProgressBar(S.timerSeconds)},t)},S.checkEditMode=function(){return!S.data.settings.editMode},S.setCurrentSlideIndex=function(e){S.currentIndex=e},S.setRightClass=function(){angular.element("#"+S.getCurrentScope()).addClass("ms_to_right").removeClass("ms_to_left")},S.setLeftClass=function(){angular.element("#"+S.getCurrentScope()).addClass("ms_to_left").removeClass("ms_to_right")},S.isCurrentIndex=function(e){return S.currentIndex===e},S.isCurrentIndexFirst=function(e){return e===S.data.settings.startSlide},S.isThisSlideCurrent=function(e){return parseInt(e.parents(".ms_repeater").data("currentIndex"))===parseInt(this.currentIndex)},S.appliedPauses=!1,S.addLeaveAnimation=function(n){var e=d.find(".ms_repeater")[S.currentIndex],e=angular.element(e).find(".ms_layer");0!==e.length&&angular.forEach(e,function(e,t){var a=angular.element(e).scope();switch(angular.isUndefined(n)&&a.layer.leave(),a.layer.type){case"video":a.seekTo(0),a.pauseVideo();break;case"vimeo":a.seekTo(1e-5),a.pauseVideo();break;case"youtube":a.pauseVideo()}S.appliedPauses=!0})},S.getDelayBeforeSlideChange=function(){return 1500},S.next=function(){l.cancel(S.timerPrev),S.currentIndex=parseInt(S.currentIndex)<parseInt(S.data.slides.length)-1?parseInt(S.currentIndex)+1:0,S.currentEndTime=0,S.appliedPauses=!1,S.firstSlideEnded=!0},S.prev=function(){l.cancel(S.timerNext),S.currentIndex=0<parseInt(S.currentIndex)?parseInt(S.currentIndex)-1:parseInt(S.data.slides.length)-1,S.currentEndTime=0,S.appliedPauses=!1,S.firstSlideEnded=!0},S.nextSlide=function(e){S.slideAnimationDefer.reject(),S.slideAnimationDefer=b.defer(),S.slideAnimationEnd=S.slideAnimationDefer.promise,S.pauseProgressBar(),e?(e=S.quickScroll?500:S.getDelayBeforeSlideChange(),S.reInitTimer(),l.cancel(S.motoTimer),S.currentEndTime=0,S.diffStartStop=0,S.addLeaveAnimation(),S.timerNext=l(function(){l.cancel(S.timerPrev),S.data.settings.timer?MPSLManager.swiped||"msSlideFade"===S.data.settings.slideAnimation?S.startTimer():b.when(S.slideAnimationEnd).then(function(){S.startTimer()}):S.reInitProgressBar(S.timerSeconds),S.setRightClass(),S.next(),l.cancel(S.timerNext)},e)):(S.addLeaveAnimation(!0),S.setRightClass(),S.next())},S.prevSlide=function(e){S.slideAnimationDefer.reject(),S.slideAnimationDefer=b.defer(),S.slideAnimationEnd=S.slideAnimationDefer.promise,S.pauseProgressBar(),e?(e=S.quickScroll?500:S.getDelayBeforeSlideChange(),S.reInitTimer(),l.cancel(S.motoTimer),S.currentEndTime=0,S.diffStartStop=0,S.addLeaveAnimation(),S.timerPrev=l(function(){l.cancel(S.timerNext),S.data.settings.timer?MPSLManager.swiped||"msSlideFade"===S.data.settings.slideAnimation?S.startTimer():b.when(S.slideAnimationEnd).then(function(){S.startTimer()}):S.reInitProgressBar(S.timerSeconds),S.setLeftClass(),S.prev(),l.cancel(S.timerPrev)},e)):(S.addLeaveAnimation(!0),S.setLeftClass(),S.prev())},S.nextSlideOutside=function(){S.currentIndex=parseInt(S.currentIndex)<parseInt(S.data.slides.length)-1?parseInt(S.currentIndex)+1:0},S.prevSlideOutside=function(){S.currentIndex=0<parseInt(S.currentIndex)?parseInt(S.currentIndex)-1:parseInt(S.data.slides.length)-1},S.isSlideBgType=function(e){return e in this.slide.backgrounds},S.isHideWidth=function(e){return!(!isNaN(parseInt(e.hideWidth))&&!S.data.settings.editMode)||S.sliderWidth>=e.hideWidth},S.isLayerType=function(e){return this.layer.type===e},S.isCounter=function(){return S.data.settings.counter},S.dataAdjustment=function(){!angular.isUndefined(S.data.settings.height)&&0!==S.data.settings.height.length||(S.data.settings.height=r.height)},S.diffStartStop=0,S.startTimer=function(){if(S.quickScroll=!1,S.currentTimeStart=Date.now(),0===S.currentEndTime||angular.isUndefined(S.currentEndTime)?S.timerSeconds=S.data.settings.timerDelay:S.timerSeconds=S.data.settings.timerDelay-S.diffStartStop,(isNaN(S.timerSeconds)||S.timerSeconds<0)&&(S.timerSeconds=S.data.settings.timerDelay,S.diffStartStop=0),n.isHover)return!1;S.startProgressBarByDelay(!0),S.motoTimer=l(function(){S.currentTimeStart=null,S.data.settings.timerReverse?S.prevSlide(!1):S.nextSlide(!1),MPSLManager.swiped||"msSlideFade"===S.data.settings.slideAnimation?(l.cancel(S.motoTimer),S.currentEndTime=0,S.diffStartStop=0,S.pieTimerCurrentStop=0,S.startTimer(!0)):b.when(S.slideAnimationEnd).then(function(){l.cancel(S.motoTimer),S.currentEndTime=0,S.diffStartStop=0,S.pieTimerCurrentStop=0,S.startTimer(!0)}),MPSLManager.swiped=!1},S.timerSeconds)},S.stopTimer=function(){S.diffStartStop=angular.isUndefined(S.diffStartStop)?0:S.diffStartStop,S.diffStartStop+=Date.now()-S.currentTimeStart,S.currentEndTime=S.data.settings.timerDelay-S.diffStartStop,S.tempTime=Date.now(),S.pauseProgressBar(),l.cancel(S.motoTimer),0===S.currentEndTime||angular.isUndefined(S.currentEndTime)?S.timerSeconds=S.data.settings.timerDelay:S.timerSeconds=S.data.settings.timerDelay-S.diffStartStop},S.setTimerSeconds=function(){0===S.currentEndTime||angular.isUndefined(S.currentEndTime)?S.timerSeconds=S.data.settings.timerDelay:S.timerSeconds=S.data.settings.timerDelay-S.diffStartStop},S.reInitProgressBar=function(){S.data.settings.slideshowTimerShow&&S.bannerLine.css({width:"0%"})},S.progressBarCalc=function(){S.diffStartStop+=Date.now()-S.currentTimeStart,S.currentTimeStart=Date.now(),S.firstSlideEnded?S.bannerTime=S.diffStartStop>r.bannerDelay?S.diffStartStop-r.bannerDelay:0:S.bannerTime=S.diffStartStop,S.progress=S.bannerTime/S.percentStep,S.data.settings.slideshowTimerShow&&S.bannerLine.css("width",S.progress+"%")},S.startProgressBarByDelay=function(e){S.cBannerDelay=S.firstSlideEnded?r.bannerDelay:0,S.data.settings.slideshowTimerShow&&S.bannerLine.parent().show(),c.cancel(S.bannerInterval),S.bannerPause||S.data.settings.slideshowTimerShow&&S.bannerLine.css({width:"0%"}),S.percentStep=(S.data.settings.timerDelay-S.cBannerDelay)/100,S.progressBarCalc(),S.bannerInterval=c(function(){S.progressBarCalc(),100<=S.progress&&c.cancel(S.bannerInterval)},(S.data.settings.timerDelay-S.cBannerDelay)/800),e||S.reInitProgressBar(S.timerSeconds),S.currentKeyTimer?(S.timerSeconds===S.data.settings.timerDelay&&S.reInitProgressBar(S.timerSeconds),S.currentKeyTimer=!1):S.reInitProgressBar(S.timerSeconds)},S.pauseProgressBar=function(){S.bannerPause=!0,c.cancel(S.bannerInterval),l.cancel(S.bannerTimeout),S.currentKeyTimer=!0},S.changeStartStopButton=function(){S.ppButton.removeClass("ms_pause")},S.$watch("currentIndex",function(){S.data.slides.forEach(function(e){e.visible=!1}),angular.isDefined(S.data.slides[S.currentIndex])&&(S.data.slides[S.currentIndex].visible=!0)}),S.data.settings.countSlides=S.data.slides.length,S.data.settings.editMode?(S.data.settings.timer=!1,S.data.settings.hoverTimer=!1,S.bullets.hide(),S.arrows.hide()):S.SliderManager={},1===S.data.slides.length&&(S.data.settings.timer=!1,S.data.settings.hoverTimer=!1,S.bullets.hide(),S.arrows.hide()),S.dataAdjustment(),S.initSlider=function(){function i(e){this.element=0!=angular.element(e).children().length?angular.element(e).children(".ms_layer"):angular.element(e),this.domElement=angular.element(e)[0],this.elementScope=this.element.scope()}function t(e){this.element=angular.element(e),this.domElement=angular.element(e)[0],this.elementScope=this.element.scope()}i.prototype.getDomElement=function(){return this.domElement},i.prototype.getScope=function(){return this.elementScope},i.prototype.setOptions=function(e){e=S.prepareLayoutOptions(e),this.elementScope.manipulate(e),S.$apply()},i.prototype.setOption=function(e,t){this.elementScope.manipulateSingle(e,t),S.$apply()},i.prototype.setFontOptions=function(e){this.elementScope.manipulateFontOptions(e),S.$apply()},i.prototype.getType=function(){return this.elementScope.layer.type},i.prototype.getOrder=function(){return this.elementScope.$index},i.prototype.remove=function(){this.elementScope.delete(this.elementScope)},t.prototype.setOptions=function(e,t){this.elementScope.manipulateSlide(this.elementScope,e,t)},S.SliderManager={updateGrid:function(e,t,a){e&&t&&(d.find(".ms_wrapper").css({width:e,height:t}),S.layout=a,S.onResize(),n.$apply())},getSlide:function(e){return new t(e)},getLayer:function(e){return new i(e)},createLayer:function(e,t){var a,n={};for(a in n.width=s.get(),n.height=s.get(),t=S.prepareLayoutOptions(t))n[a]=t[a];n.type=e,n.styles=s.getStyles(),"image"===e&&(n.defaultImageDimensions={},t.width&&(n.defaultImageDimensions.width=t.width)),"html"===e&&void 0===n.whiteSpace&&(n.whiteSpace=s.get(r.whiteSpace)),S.data.slides[0].layers.push(n),S.$apply();e=d.find(".ms_repeater")[0],e=angular.element(e).find(".layers");return new i(e[e.length-1])},duplicateLayer:function(e,t){var a,n={};for(a in t=S.prepareLayoutOptions(t),e.elementScope.layer)n[a]=e.elementScope.layer[a];delete(n=angular.extend({},n,t)).$$hashKey,delete n.typeChanged,delete n.created,S.data.slides[0].layers.push(n),S.$apply();t=d.find(".ms_repeater")[0],t=angular.element(t).find(".layers");return new i(t[t.length-1])}}},S.calculationOfPosition=function(e,t,a){if(a.css({top:"auto",left:"auto",bottom:"auto",right:"auto"}),"object"!=typeof e)return!1;var n=d.find(".ms_layers_wrapper:eq(0)"),i=n.outerWidth(),r=n.height(),s=a.outerWidth(!0),l=S.factor,o={},n=S.data.settings.availableLayouts[S.layout]?S.layout:S.lastLayout;e["align-horizontal"]&&("center"===e["align-horizontal"][n]?("html"!==t.type||""!==t.width&&null!==t.width||"normal"!==a.css("white-space")||(a.addClass("ms_layer_left_pos"),s=a.outerWidth(!0),a.removeClass("ms_layer_left_pos")),o.left=i/2-s/2+e["offset-x"][n]*l):"left"===e["align-horizontal"][n]?o.left=e["offset-x"][n]*l:"right"===e["align-horizontal"][n]&&(o.right=e["offset-x"][n]*l),a.css(o)),o={},e["align-vertical"]&&(s=a.outerHeight(!0),"middle"===e["align-vertical"][n]?o.top=r/2-s/2+e["offset-y"][n]*l:"top"===e["align-vertical"][n]?o.top=e["offset-y"][n]*l:"bottom"===e["align-vertical"][n]&&(o.bottom=e["offset-y"][n]*l),a.css(o))},S.applyLeaveAnimation=function(e,t,a){a-=S.data.settings.timerDelay-S.timerSeconds;S.leaveTimer=l(function(){t.removeClass(e.animation),t.addClass(e.leaveAnimation),l.cancel(S.leaveTimer)},a)},S.percentage=function(e){return parseInt(e)+"%"},S.s=function(e){return parseInt(e)+"s"},S.ms=function(e){return parseInt(e)+"ms"},S.px=function(e){return e+"px"},S.slice=function(e,t){return"number"==typeof e&&(e=e.toString()),"string"!=typeof e&&(e=""),e.slice(0,t?-1:-2)},S.stopPlayingTimer=function(){S.slideAnimationDefer.reject(),S.slideAnimationDefer=b.defer(),S.slideAnimationEnd=S.slideAnimationDefer.promise,S.data.settings.timer&&!S.data.settings.isSingleSlide&&S.data.settings.isSlideshowEnabled&&(S.ppButton.removeClass("ms_pause"),S.data.settings.timer=!1,l.cancel(S.motoTimer),S.stopTimer(),S.$$phase||S.$apply())},S.startPlayingTimer=function(){S.data.settings.timer||S.data.settings.isSingleSlide||!S.data.settings.isSlideshowEnabled||(isNaN(S.diffStartStop)&&S.diffStartStop<0&&(S.diffStartStop=0),!S.data.settings.timer&&S.currentTimer&&S.tempTimerForVideo&&(S.ppButton.addClass("ms_pause"),S.data.settings.timer=!0,S.startTimer()),S.$$phase||S.$apply())},S.aIds=[],S.verifyPlayers=function(e){for(var t={},a=0;a<e.length;++a){var n=e[a];if(Object.prototype.hasOwnProperty.call(t,n))return!0;t[n]=!0}return!1},S.arrYoutubePlayersState={},S.arrVideoPlayersState={},S.arrVimeoPlayersState={},S.checkAllPlayers=function(){for(var e in S.arrYoutubePlayersState)if(1===S.arrYoutubePlayersState[e]||3===S.arrYoutubePlayersState[e])return!1;for(var e in S.arrVideoPlayersState)if(!S.arrVideoPlayersState[e].paused)return!1;for(var e in S.arrVimeoPlayersState)if("play"===S.arrVimeoPlayersState[e])return!1;return!0},S.youtubeApiScriptAdded=!1,S.loadYoutubeApiScript=function(){var e,t;S.youtubeApiScriptAdded||angular.element('script[src="https://www.youtube.com/iframe_api"]').length||((e=document.createElement("script")).src="https://www.youtube.com/iframe_api",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t),S.youtubeApiScriptAdded=!0)},void 0===window.mpslYTApiReady&&(S.youtubeApiReadyDefer=b.defer(),window.mpslYTApiReady=S.youtubeApiReadyDefer.promise,window.onYouTubeIframeAPIReady=function(){S.youtubeApiReadyDefer.resolve()}),S.disableMobileCheck=function(e){return!a||!e},S.showPagination=function(){return!(S.data.settings.editMode||!S.data.settings.thumbnailsShow||a||S.data.settings.isSingleSlide)},S.timeoutLeave=function(e){l.cancel(e.layer.layerTimerLeave),isNaN(S.timerSeconds)&&(S.timerSeconds=S.data.settings.timerDelay),e.layer.currDelay=angular.isUndefined(e.layer.leaveDelay)||null===e.layer.leaveDelay?S.timerSeconds-1500:e.layer.leaveDelay-(S.data.settings.timerDelay-S.timerSeconds),e.layer.layerTimerLeave=l(function(){e.layer.leave(),l.cancel(e.layer.layerTimerLeave)},e.layer.currDelay)},S.applyLAnimation=function(e,t){b.when(S.sliderLoaded).then(function(){S.data.settings.timer&&!n.isHover&&(S.firstSlideEnded&&!MPSLManager.swiped&&"msSlideFade"!==S.data.settings.slideAnimation?b.when(S.slideAnimationEnd).then(function(){S.timeoutLeave(e,t)}):S.timeoutLeave(e,t))})},S.addLayerAnimation=function(e,t){b.when(S.sliderLoaded).then(function(){t.parents(".ms_slide").hasClass("ms_current_slide")&&(t.addClass(r.animatedClass+" "+e.animation),angular.element(t).css({"-webkit-animation-delay":S.ms(e.delay),"animation-delay":S.ms(e.delay)})),e.duration&&angular.element(t).css({"animation-duration":S.ms(e.duration),"-webkit-animation-duration":S.ms(e.duration)}),e.timingFunction&&t.addClass(e.timingFunction)})},S.setElementPosition=function(n,i,r){var s=n.width(),l=n.height(),e=i.title,t=i.classes,a=i.content,o=i.type,d="button"===o?!t||!e:"html"===o?!t||!a:!t,u=c(function(e){var t=n.width(),a=n.height();s===t&&l===a||d||30<=e?(S.calculationOfPosition(i.position,i,n,n.parents("#"+S.getCurrentScope())),r.resolve(),c.cancel(u)):(s=t,l=a)},200)},S.setElPosition=function(n,i,r){var s=n.width(),l=n.height(),e=i.title,t=i.classes,a=i.content,o=i.type,d="button"===o?!t||!e:"html"===o?!t||!a:!t,u=c(function(e){var t=n.width(),a=n.height();s===t&&l===a||d||30<=e?(S.calculationOfPosition(i.position,i,n,n.parents("#"+S.getCurrentScope())),r.resolve(),c.cancel(u)):(s=t,l=a)},200)},S.addLeaveLayerAnimation=function(e,t){e.removeClass(t.animation),"mpsl-auto"===t.leaveAnimation&&(t.leaveAnimation="flip"===t.animation?"flip":t.animation.replace("In","Out")),e.addClass(t.leaveAnimation);t=S.quickScroll?0:10;angular.element(e).css({"-webkit-animation-delay":S.ms(t),"animation-delay":S.ms(t)})},S.addEnterLayerAnimation=function(e,t){MPSLManager.swiped||"msSlideFade"===S.data.settings.slideAnimation?(e.removeClass(t.leaveAnimation),e.addClass(r.animatedClass),e.addClass(t.animation),angular.element(e).css({"-webkit-animation-delay":S.ms(t.delay),"animation-delay":S.ms(t.delay)})):b.when(S.slideAnimationEnd).then(function(){e.removeClass(t.leaveAnimation),e.addClass(r.animatedClass),e.addClass(t.animation),angular.element(e).css({"-webkit-animation-delay":S.ms(t.delay),"animation-delay":S.ms(t.delay)})},function(){e.removeClass(t.leaveAnimation),e.addClass(r.animatedClass),e.addClass(t.animation),angular.element(e).css({"-webkit-animation-delay":S.ms(t.delay),"animation-delay":S.ms(t.delay)})})},S.resetStyles=function(e,t){var a=e.type,n="image"===a,i=n?t.scope().imageElement:t,r=[],s=g.indexOf(S.layout);s!=g.length-1&&(r=e.originalStyles[g[s+1]]);var l,o=[r,t.data("defStyles")];for(l in"html"===a&&o.push(["width"]),o){var d,u,c=o[l],m=angular.isArray(c);for(d in c)c.hasOwnProperty(d)&&(u=m?c[d]:d,t.css(u,""),n&&i.css(u,""))}},S.changeStyles=function(i,r,s,e){var t=void 0!==e?e:i.resizable;s=void 0!==s&&s;var a,l,n,o=i.resizable?S.factor:1,d=S.data.settings.availableLayouts[S.layout]?S.layout:S.lastLayout,u=i.width[S.layout],c=i.height[S.layout],m=i.type,g="image"===m,p=s&&"IMG"===r[0].nodeName,y=g||p,f=g?r.scope().imageElement:r,e=!0,h=!0;t&&!S.data.settings.editMode&&(a=function(e){r.data("defStyles")&&(_.set(r.data("defStyles"),r,o,!0),g&&_.set(f.data("defStyles"),f,o,!0)),!g&&i.styles[d]&&"IMG"!==r[0].nodeName&&_.set(i.styles[d],r,o,!1,S.data.settings.editMode),y&&f.css({width:"",height:""});var t=y?1:o,a=y?f:r;u&&!s&&a.css("width",u*t),c&&!s&&a.css("height",c*t);var n,t=!0;y&&(t=S.initStyles(i,r,!1)),!0===t?(h=!0,l()):(n=b.defer(),h=n.promise,t.then(function(){l(n)})),void 0!==e&&e.resolve()},l=function(e){var t,a;g?(a=f,t=i.defaultImageDimensions):p&&(t=(a=r).data("defaultImageDimensions")),void 0!==t&&t&&t&&(t.width&&a.css("width",t.width*o),t.height&&a.css("height",t.height*o)),void 0!==e&&e.resolve()},S.resetStyles(i,r),t=!0,!g&&i.styles[d]&&"IMG"!==r[0].nodeName?(_.set(i.styles[d],r,1,!1,S.data.settings.editMode),t=S.initStyles(i,r,!0,s)):g||"IMG"!==r[0].nodeName||(t=S.initStyles(i,r,!0,!0)),!0===t?(e=!0,a()):(e=(n=b.defer()).promise,t.then(function(){a(n)}))),S.data.settings.editMode&&(i.styles[d]&&"IMG"!==r[0].nodeName&&(r.data("defStyles")&&!i.changed&&(_.set(r.data("defStyles"),r,o,!0,S.data.settings.editMode),g&&_.set(f.data("defStyles"),f,o,!0,S.data.settings.editMode)),""!==i.styles[d]&&_.set(i.styles[d],r,o,!1,S.data.settings.editMode)),"image"!==m||(v=i.defaultImageDimensions)&&v.width&&r.find("img").css("width",v.width*o));var v=[];if(!0!==e&&v.push(e),!0!==h&&v.push(h),v.length){var w=b.defer();return b.all(v).then(function(){w.resolve()}),w.promise}return!0},S.changePos=function(e,t){S.calculationOfPosition(t.data("mpsl_positions"),e,t)},S.imagesLoaded=function(t,e){e=void 0!==e&&e;var i,r,a=b.defer(),n=e?t:t.find("img");n.length?(r=!(i=[]),angular.forEach(n,function(e){var t=angular.element(e),a=t.attr("src");if(void 0===a||!a.trim())return!0;var n=b.defer();e.complete?n.resolve():(t.one("load",function(){r=!0,n.resolve()}),t.one("error",n.resolve)),i.push(n.promise)}),i.length?b.all(i).then(function(){var e;r?e=l(function(){a.resolve(),l.cancel(e)},100):a.resolve()}):a.resolve()):a.resolve();var n=a.promise,s=!0;return e||t.html()||(s=!1),b.when(n).then(function(){var e;t.data("msImageLoaded",s),!s||(e=t.find("img")).length&&e.data("msImageLoaded",!0)}),n},S.resizeSliderElements=function(){var n=[];return angular.forEach(d.find(".ms_layer"),function(e){var t=b.defer();n.push(t.promise);var a=angular.element(e),e=a.scope().layer;S.setElPosition(a,e,t)}),n},S.linkingElement=function(e,t,a){if(angular.isDefined(e.layer.type))switch(e.layer.type){case"image":case"button":case"video":case"youtube":case"vimeo":_.layer(e,t,a);break;case"html":_.htmlLayer(e,t,a)}},S.initStyles=function(e,t,a,n){a=void 0===a||a,n=void 0!==n&&n;var i,r,s=e.type,l="image"===s,o=l?t.scope().imageElement:t,d=!l&&"IMG"===t[0].nodeName;a&&(t.data("defStyles",_.explode(t)),l&&o.data("defStyles",_.explode(o))),"image"===s?(c=!0,r=o,i=function(){e.defaultImageDimensions=S.getDimensionsByElement(r)}):"html"===e.type&&(!n||n&&d)?(r=t,i=d?(c=!0,function(){r.data("defaultImageDimensions",S.getDimensionsByElement(r))}):(c=!1,function(){var e=r.find("img");e.length&&angular.forEach(e,function(e){e=angular.element(e);e.data("defaultImageDimensions",S.getDimensionsByElement(e))})})):d&&(c=!0,r=t,i=function(){e.defaultImageDimensions=S.getDimensionsByElement(r)});var u=b.defer(),c=void 0===r||(!0===r.data("msImageLoaded")?(i(),!0):(S.imagesLoaded(r,c).then(function(){i(),u.resolve()}),u.promise));return c},S.getDimensionsByElement=function(e){return{width:S.slice(e.css("width")),height:S.slice(e.css("height"))}},S.prepareLayoutOptions=function(a){return angular.forEach(u,function(e){var t;a.hasOwnProperty(e)&&(t=a[e],a[e]={},a[e][S.layout]=t)}),a}}angular.module("motosliderApp").controller("MotosliderCtrl",e),e.$inject=["$scope","$rootScope","defaults","parseData","$timeout","$sce","$q","$interval","$rootElement","detectMobileDevice","$swipe","listLayouts","styleService","layout","newLayoutService","listLayer"]}(),function(){function e(e){return{restrict:"AE",replace:!0,controller:"MotosliderCtrl",scope:!0,template:e.get("../app/views/template.html"),link:function(e,t){e.deferred=[],e.defaultWidth=parseInt(t.width()),t.css("opacity",0)}}}angular.module("motosliderApp").directive("motoslider",e),e.$inject=["$templateCache"]}(),angular.module("motosliderApp").directive("msSlideRepeater",function(){return{link:function(n){var i=function(a,e){angular.forEach(e,function(e,t){angular.isObject(e)&&a.hasOwnProperty(t)?i(a[t],e):a[t]=e})};n.manipulateSlide=function(e,a){a.hasOwnProperty("backgrounds")&&angular.forEach(n.slide.backgrounds,function(e,t){a.backgrounds.hasOwnProperty(t)||delete n.slide.backgrounds[t]}),i(n.slide,a),n.$apply()}}}}),angular.module("motosliderApp").directive("msCounter",function(){return{restrict:"A",link:function(t,a){t.$watch("currentIndex",function(e){e=parseInt(e+1)+"/"+parseInt(t.data.settings.countSlides);angular.element(a).html(e)})}}}),function(){function e(p,y,f,h,v,w,S){return{link:function(i,r){var s=i.data.settings.fullWidth,l=i.data.settings.fullHeight,n=i.data.settings.offsetSettings.container,o=i.data.settings.fullSizeGrid,d=i.data.settings.editMode,u=i.data.settings.availableLayouts;i.setFactor=function(){if(i.data.settings.editMode)i.factor=1;else if(h[i.layout]){if(u[i.layout])i.lastLayout=i.layout,a=i.layout;else{for(var e=v.indexOf(i.layout);e--,i.lastLayout=v[e],!u[v[e]];);a=v[e]}var t=parseInt(r.width())/i.data.settings.grid[a].width,a=parseInt(r.height())/i.data.settings.grid[a].height;i.factor=a&&a<t?a:t,i.factor=1<i.factor?1:i.factor}};function c(e){void 0===e&&(e=0);var t,a=p.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;d||(t=null,"px"===i.data.settings.offsetSettings.units&&(t=a-i.data.settings.offsetSettings.height),"%"===i.data.settings.offsetSettings.units&&(t=a-a*i.data.settings.offsetSettings.height/100),t-=e,r.css({"max-height":"none",height:t||a}))}function m(){var e,t,a;s&&!d&&(t=(e="BackCompat"==document.compatMode?document.body:document.documentElement).scrollHeight>e.clientHeight?function(){document.body.style.overflow="hidden";var e=document.body.clientWidth;return document.body.style.overflow="scroll",e=(e-=document.body.clientWidth)||document.body.offsetWidth-document.body.clientWidth,document.body.style.overflow="",e}():0,t=(p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-(e=r.parent()[0].getBoundingClientRect().left)-r.parent().outerWidth()-t,r.css({"max-width":"none",width:"auto","margin-left":-e+"px","margin-right":-t+"px"})),l&&!d&&(n&&(a=angular.element(document).find(i.data.settings.offsetSettings.container)).length?f.when(i.imagesLoaded(a)).then(function(){var t=0;angular.forEach(a,function(e){t+=angular.element(e).outerHeight(!0)}),c(t),i.changeLayers()}):c())}function e(){var e=i.data.settings.availableLayouts[i.layout]?i.layout:i.lastLayout;i.currentGrid=function(e){if(i.layout)return{width:parseInt(i.data.settings.grid[e].width),height:parseInt(i.data.settings.grid[e].height)}}(e);var t,a,e=y.find(".ms_layers_wrapper"),n=r.height();r.css({height:parseInt(r.width())*i.currentGrid.height/i.currentGrid.width,"max-height":i.currentGrid.height}),o||d||(a=parseInt(r.width())*i.currentGrid.height/i.currentGrid.width,l&&!s?angular.forEach(e,function(e){a=n<=angular.element(e).height()?n:a,angular.element(e).css({height:a})}):l&&s&&(t=parseInt(r.height())*i.currentGrid.width/i.currentGrid.height,a=r.height()*i.factor,angular.forEach(e,function(e){n<=angular.element(e).height()&&(t*=i.factor),angular.element(e).css({height:a}),angular.element(e).css({width:t})}))),o&&!d&&angular.forEach(e,function(e){angular.element(e).css({width:parseInt(r.width()),"max-width":parseInt(r.width())})}),m()}var t,a,g;i.layout="desktop",i.onResize=function(){i.data.settings.editMode||i.setLayoutType(),e(),i.setFactor(),i.currentWidth=r.width()},i.onResize(),d||(i.onWindowResize=function(){i.onResize(),S.cancel(t),t=S(function(){i.onResize(),i.changeLayers(),S.cancel(t)},250),i.sliderWidth=p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i.$apply()},angular.element(p).bind("resize.motoSlider",i.onWindowResize),r.on("$destroy",function(){angular.element(p).off("resize.motoSlider",i.onWindowResize)})),y.one("MPSliderBeforeLoad",function(){var e=S(function(){angular.element(p).triggerHandler("resize.motoSlider"),S.cancel(e)},0);i.onResize()}),i.changeLayers=function(){var e=r.find(".ms_layer");angular.forEach(e,function(e){i.linkingElement(angular.element(e).scope(),angular.element(e),!0)})},i.$watch("sliderWidth",function(e,t){e<t?i.isIncrease=!1:t<e&&(i.isIncrease=!0)}),i.data.settings.editMode||(i.data.settings.controlsHideOnLeave&&(i.isTouchDevice?r.bind("touchstart",function(){S.cancel(a),i.$apply("sliderMouseEnter = true"),a=S(function(){i.$apply("sliderMouseEnter = false"),S.cancel(a)},2e3)}):(r.bind("mouseenter",function(){i.$apply("sliderMouseEnter = true")}),r.bind("mouseleave",function(){i.$apply("sliderMouseEnter = false")}))),i.data.settings.timer?(i.ppButton.addClass("ms_pause"),i.isTouchDevice?(i.data.settings.arrowsShow=!1,angular.element(r.parent()).bind("touchend",function(e){e=angular.element(e.target).parent();e.hasClass("ms_arrows")||e.hasClass("ms_bullet_wrapper")||0!==i.delta?i.data.settings.arrowsShow=!1:i.data.settings.timer?(i.data.settings.arrowsShow=!0,i.pause()):(i.data.settings.arrowsShow=!1,i.start())})):i.data.settings.hoverTimer&&(r.bind("mouseenter",function(){w.isHover=!0,w.slideAnimating||i.pause()}),r.bind("mouseleave",function(){w.isHover=!1,w.slideAnimating||i.start()}))):i.isTouchDevice&&(g=S(function(){i.$apply("data.settings.arrowsShow = true"),S.cancel(g)},0))),i.start=function(){i.ppButton.addClass("ms_pause"),i.data.settings.timer=!0,i.startTimer(),i.$digest()},i.pause=function(){i.ppButton.removeClass("ms_pause"),i.data.settings.timer=!1,i.stopTimer(),S.cancel(i.motoTimer),angular.element(r).find(".ms_current_slide").find(".ms_layer").length&&S.cancel(angular.element(r).find(".ms_current_slide").find(".ms_layer").scope().layer.layerTimerLeave),i.$digest()}}}}angular.module("motosliderApp").directive("msSlider",e),e.$inject=["$window","$rootElement","$q","layout","listLayouts","$rootScope","$timeout"]}(),function(){function e(i){return{restrict:"A",link:function(t,e,a){t.getEnterAnimation=function(){return angular.isUndefined(t.slide.general.animation)||0===t.slide.general.animation.length?"bounceIn":t.slide.general.animation},t.getLeaveAnimation=function(){return angular.isUndefined(t.slide.general.fadeAnimation)||0===t.slide.general.fadeAnimation.length?"rollOut":t.slide.general.fadeAnimation},a.$set("enter-animation",t.getEnterAnimation()),a.$set("leave-animation",t.getLeaveAnimation()),a.$set("duration",t.slide.general.duration),a.$set("easing",t.slide.general.easing);var n=e.closest(".ms_repeater");n.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(e){angular.element(e.target).hasClass("ms_layer")||(i.slideAnimating=!0)}),n.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){angular.element(e.target).hasClass("ms_layer")||(i.slideAnimating=!1,"msSlideFade"===t.data.settings.slideAnimation&&t.slideAnimationDefer.resolve(),n.is(e.target)&&(n.hasClass("ms_current_slide")?("msSlideFade"!==t.data.settings.slideAnimation&&t.slideAnimationDefer.resolve(),n.removeClass(t.getEnterAnimation()),n.css({"-webkit-transform":"translate3D(0, 0, 0)","-moz-transform":"translate3D(0, 0, 0)","-ms-transform":"translate3D(0, 0, 0)",opacity:1}),n.siblings(".ms_slide").css({opacity:0})):(n.removeClass(t.getLeaveAnimation()),e=n.find(".layers>.ms_layer"),angular.forEach(e,function(e){angular.element(e).scope().layer.removeShowClasses()}))))}),t.isSlideEnter=function(){return t.slide.visible}}}}angular.module("motosliderApp").directive("msSlide",e),e.$inject=["$rootScope"]}(),angular.module("motosliderApp").directive("msSlideGradient",function(){return{restrict:"A",link:function(t,a){t.bgOptions=t.slide.backgrounds.gradient,t.updateGradient=function(){var e=/[0-9]+([^ ,\)`]*)/.exec(t.bgOptions.position)[1],e=90-parseInt(t.bgOptions.position)+e;a.css("background",t.bgOptions.colorInitial).css("background","-moz-linear-gradient("+t.bgOptions.position+",  "+t.bgOptions.colorInitial+" 0%, "+t.bgOptions.colorFinal+" 100%)").css("background","-webkit-linear-gradient("+e+",  "+t.bgOptions.colorInitial+" 0%, "+t.bgOptions.colorFinal+" 100%)").css("background","-o-linear-gradient("+t.bgOptions.position+",  "+t.bgOptions.colorInitial+" 0%, "+t.bgOptions.colorFinal+" 100%)").css("background","-ms-linear-gradient("+t.bgOptions.position+",  "+t.bgOptions.colorInitial+" 0%, "+t.bgOptions.colorFinal+" 100%)").css("background","linear-gradient("+t.bgOptions.position+",  "+t.bgOptions.colorInitial+" 0%, "+t.bgOptions.colorFinal+" 100%)").css("min-height","100%")},t.$watch("bgOptions.position",function(){t.data.settings.editMode&&t.updateGradient()}),t.$watch("bgOptions.colorInitial",function(){t.data.settings.editMode&&t.updateGradient()}),t.$watch("bgOptions.colorFinal",function(){t.data.settings.editMode&&t.updateGradient()}),t.updateGradient(),t.getStyles=function(){}}}}),angular.module("motosliderApp").directive("msSlideColor",function(){return{restrict:"A",link:function(e){e.bgOptions=e.slide.backgrounds.color,e.$watch("bgOptions.color",function(){if(e.data.settings.editMode)return{"background-color":e.getColor(e),"min-height":"100%","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"}}),e.getStyles=function(){return{"background-color":e.getColor(e),"min-height":"100%","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover"}},e.getColor=function(e){return e.bgOptions.color}}}}),function(){function e(e){return{restrict:"A",link:function(i){i.bgOptions=i.slide.backgrounds.image,i.getBgSlide=function(){var e="url("+i.bgOptions.src+")",t=i.bgOptions.repeat,a="percentage"===i.bgOptions.position?i.bgOptions.positionX+"% "+i.bgOptions.positionY+"%":i.bgOptions.position,n="percentage"===i.bgOptions.fit?i.bgOptions.fitX+"% "+i.bgOptions.fitY+"%":i.bgOptions.fit;return{"min-height":"100%","background-image":e,"background-repeat":t,"background-position":a,"background-size":n,"-webkit-background-size":n,"-moz-background-size":n}},i.$watch("bgOptions.src",function(){if(i.data.settings.editMode)return i.getBgSlide()}),i.$watch("bgOptions.position",function(){if(i.data.settings.editMode)return i.getBgSlide()}),i.$watch("bgOptions.repeat",function(){if(i.data.settings.editMode)return i.getBgSlide()}),i.$watch("bgOptions.fit",function(){if(i.data.settings.editMode)return i.getBgSlide()}),i.getStyles=function(){return i.bgOptions.src?i.getBgSlide():{"background-color":e.bgColorSlide,"min-height":"100%","-webkit-background-size":i.bgOptions.fit,"-moz-background-size":i.bgOptions.fit,"background-size":i.bgOptions.fit}}}}}angular.module("motosliderApp").directive("msSlideImage",e),e.$inject=["defaults"]}(),function(){function e(u,c){return{restrict:"A",link:function(l,o){var t="mpsl-video-bg-cover",a="mpsl-video-bg-cover-",e=[],n=c.defer(),i=n.promise,r=!1;l.bgOptions=l.slide.backgrounds.video,l.bgOptions.inited=!1,l.getStyles=function(){var e,t,a,n,i,r,s={};return angular.isDefined(l.bgOptions._original)&&(t=e=0,a=o.parent().width(),n=o.parent().height(),i=l.bgOptions._original.width/l.bgOptions._original.height*n,r=l.bgOptions._original.height/l.bgOptions._original.width*a,"fill"===l.bgOptions.fillmode&&(a<=i?(s.width=i+"px",s.height="100%",a<i&&(e=-(i-a)/2)):(s.width="100%",s.height=r+"px",n<r&&(t=-(r-n)/2)),s["min-height"]="100%",s["min-width"]="100%",s["max-width"]="",s["max-height"]="",s.left=e,s.top=t)),s},l.getSrc=function(e){return angular.isDefined(e)&&0!==e.length?u.trustAsResourceUrl(e):""},l.getType=function(e){switch(e){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg";default:return""}},l.getVideoMute=function(){return l.bgOptions.mute},l.getVideoControls=function(){return l.bgOptions.controls},l.getVideoLoop=function(){return l.bgOptions.loop},l.getCoverTypeClass=function(e){var t=l.bgOptions.cover_type;return angular.isDefined(t)&&0!==t.length?e?" "+a+t:a+t:""},l.deleteSourcesHtml=function(e){e.find("source").remove()},l.addSourcesHtml=function(a){angular.forEach(l.bgOptions.sources,function(e,t){angular.isDefined(e)&&""!==e&&(t=angular.element("<source />",{src:l.getSrc(e),type:l.getType(t)}),a.append(t))})},l.$watch("bgOptions.sources",function(){var e;l.data.settings.editMode&&l.bgOptions.inited&&(delete l.bgOptions._original,e=o.find("video"),l.deleteSourcesHtml(e),l.addSourcesHtml(e),e[0].load())},!0),l.$watch("bgOptions.cover",function(){l.data.settings.editMode&&l.bgOptions.inited&&(l.bgOptions.cover?l.addCoverIfNotExist():l.removeCover())}),l.$watch("bgOptions.cover_type",function(){l.data.settings.editMode&&l.bgOptions.inited&&l.setCoverType()}),l.$watch("bgOptions.fillmode",function(){l.data.settings.editMode&&l.updateStyle()}),l.removeCover=function(){o.find("."+t).remove()},l.addCoverIfNotExist=function(){var e;o.find("."+t).length||(e=angular.element("<div />",{class:t+l.getCoverTypeClass(!0)}),o.append(e))},l.setCoverType=function(){var e=l.getCoverTypeClass();o.find("."+t).removeClass().addClass(t).addClass(e)},l.updateStyle=function(){o.css(l.getStyles())};var s=angular.element("<video />",{preload:"metadata",controls:!1,loop:l.getVideoLoop()});l.getVideoMute()&&(s[0].muted=l.getVideoMute()),!l.data.settings.editMode&&l.bgOptions.autoplay||s.removeAttr("autoplay"),s.on("loadedmetadata",function(e,t){l.bgOptions._original={},l.bgOptions._original.width=e.target.videoWidth,l.bgOptions._original.height=e.target.videoHeight,l.updateStyle(),n.resolve()}),l.isThisSlideCurrent(o)&&e.push(i),l.bgOptions.cover&&(l.addCoverIfNotExist(),l.setCoverType()),o.on("$destroy",function(){angular.element(window).off("resize",l.updateStyle)}),angular.element(window).on("resize",l.updateStyle),l.bgOptions.inited=!0,l.$watch("currentIndex",function(){parseInt(o.parents(".ms_repeater").data("currentIndex"))===parseInt(l.currentIndex)&&(r||(r=!0,l.addSourcesHtml(s),o.append(s)),!l.data.settings.editMode&&l.bgOptions.autoplay&&l.isThisSlideCurrent(o)&&c.when(i).then(function(){s[0].play()}))});var d=c.defer();c.all(e).then(function(){d.resolve()}),l.deferred.push(d.promise)}}}angular.module("motosliderApp").directive("msSlideVideo",e),e.$inject=["$sce","$q"]}(),angular.module("motosliderApp").directive("msVideoSource",function(){return{restrict:"A",link:function(e,t,a){e.getSrc=function(e){return e.slide.src},e.getType=function(e){return e.slide.format},a.$set("src",e.getSrc(e)),a.$set("type",e.getType(e))}}}),function(){function e(t,e,c,a){return{restrict:"A",link:function(d,u){d.onLayerReady=function(o){return a(function(n,e){var t=d.layer.type,a=d.layer.classes,i=u.width(),r=u.height(),s="button"===t?!a||!d.layer.title:"html"===t?!a||!d.layer.content:!a,l=c(function(e){var t=u.width(),a=u.height();i===t&&r===a||s||30<=e?("function"==typeof o&&o(),n(),c.cancel(l)):(i=t,r=a)},200)})},e.one("MPSliderBeforeLoad",function(){d.linkingElement(d,u,!1)}),d.layer.status="created",d.data.settings.editMode||(u.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){u.is(e.target)&&("leaving"!==d.layer.status?u.removeClass(t.layerHideClass).addClass(t.layerShowClass).removeClass(d.layer.animation):u.removeClass(t.layerShowClass).addClass(t.layerHideClass).removeClass(d.layer.leaveAnimation))}),u.on("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(e){u.is(e.target)&&u.removeClass(t.layerHideClass).removeClass(t.layerShowClass)}),u.on("dragstart",function(){return!1})),d.layer.removeShowClasses=function(){u.removeClass(t.layerShowClass)},d.layer.leave=function(){"leaving"!==d.layer.status&&(d.layer.status="leaving",d.addLeaveLayerAnimation(u,d.layer),d.layer.timingFunction&&u.removeClass(d.layer.timingFunction),d.layer.leaveTimingFunction&&u.addClass(d.layer.leaveTimingFunction),d.layer.leaveDuration&&angular.element(u).css({"-webkit-animation-duration":d.ms(d.layer.leaveDuration),"animation-duration":d.ms(d.layer.leaveDuration)}))},d.layer.enter=function(){d.layer.status="entering",d.addEnterLayerAnimation(u,d.layer),d.layer.leaveTimingFunction&&u.removeClass(d.layer.leaveTimingFunction),d.layer.timingFunction&&u.addClass(d.layer.timingFunction),d.layer.duration&&angular.element(u).css({"-webkit-animation-duration":d.ms(d.layer.duration),"animation-duration":d.ms(d.layer.duration)})}}}}angular.module("motosliderApp").directive("msLayer",e),e.$inject=["defaults","$rootElement","$interval","$q"]}(),function(){function e(c,m){return{restrict:"A",link:function(r,s,t){var e=!0,a=[],n=[];r.linkElement=null,r.imageElement=null,"A"==s[0].tagName?(r.linkElement=s,r.imageElement=s.find("img"),r.layer.link||(r.layer.linkClasses="")):r.imageElement=s,angular.forEach(r.layer.imgAttrs,function(e,t){"src"!==t&&"class"!==t&&r.imageElement.attr(t,e)});var i=m.defer();r.imageElement.on("load",function(){var e=c(function(){i.resolve(),c.cancel(e)},100)}),r.layer.src.length?r.imageElement[0].addEventListener("error",function(e){i.resolve()}):i.resolve(),r.$watch("layer.src",function(){r.data.settings.editMode&&(r.imageElement.attr("src",r.layer.src),n.push(i.promise))}),r.layer.clArr1=[],r.$watch("layer.classes",function(){var e;r.data.settings.editMode&&(r.layer.classes&&r.layer.clArr1.push(r.layer.classes),r.layer.clArr1.forEach(function(e){r.imageElement.removeClass(e)}),r.imageElement.attr("style",""),r.layer.classes&&r.imageElement.addClass(r.layer.classes),t.$set("positions",r.layer.position),e=m.defer(),r.setElementPosition(s,r.layer,e),n.push(e.promise))}),r.layer.clArr2=[],r.$watch("layer.linkClasses",function(){var e;r.data.settings.editMode&&(r.layer.linkClasses&&r.layer.clArr2.push(r.layer.linkClasses),r.layer.clArr2.forEach(function(e){r.linkElement.removeClass(e)}),r.linkElement.attr("style",""),r.linkElement.addClass("ms_image_layer"),r.layer.linkClasses&&r.linkElement.addClass(r.layer.linkClasses),t.$set("positions",r.layer.position),r.linkElement.css("opacity","1"),e=m.defer(),r.setElementPosition(s,r.layer,e),n.push(e.promise))});var l,o=r.$watch("layer.width",function(){r.imageElement.css({width:r.layer.width[r.layout]}),o()});r.linkElement&&r.layer.link&&r.linkElement.addClass(r.layer.linkClasses),r.imageElement.addClass(r.layer.classes),r.manipulate=function(e){var t,a,n,i=!1;for(n in(e.hasOwnProperty("link")&&!e.link||!e.hasOwnProperty("link")&&!r.layer.link)&&(e.linkClasses=""),e)t=!(void 0===e[n]||""===e[n]||null===e[n]),a=!(void 0===r.layer[n]||""===r.layer[n]||null===r.layer[n]),i||!t&&!a||angular.equals(r.layer[n],e[n])||(i=!0),r.layer[n]=e[n];i?r.$apply():s.parent().trigger("MPSLLayerChange"),r.layer.changed=!0},r.delete=function(e){r.data.slides[0].layers.splice(e.$index,1),r.$apply()},r.getImageEnterAnimationLayer=function(e){return e.animation},r.getImageLayer=function(e){return e.leaveAnimation},r.getLeaveDelayAnimationLayer=function(e){return e.leaveDelay},r.imageElement.attr("src",r.layer.src),r.linkElement&&(t.$set("target",r.layer.target),t.$set("href",r.layer.link)),r.data.settings.editMode?(s.addClass("ms_visible"),s.css({opacity:1})):(l=m.defer(),setTimeout(function(){s.addClass("ms_visible"),l.resolve()},parseInt(r.layer.delay)),t.$set("leave-delay",r.getLeaveDelayAnimationLayer(r.layer)),r.addLayerAnimation(r.layer,s)),r.linkElement&&t.$set("linkProportions",{"padding-top":r.slice(r.linkElement.css("padding-top")),"padding-right":r.slice(r.linkElement.css("padding-right")),"padding-bottom":r.slice(r.linkElement.css("padding-bottom")),"padding-left":r.slice(r.linkElement.css("padding-left")),"border-top-width":r.slice(r.linkElement.css("border-top-width")),"border-right-width":r.slice(r.linkElement.css("border-right-width")),"border-left-width":r.slice(r.linkElement.css("border-left-width")),"border-bottom-width":r.slice(r.linkElement.css("border-bottom-width")),"letter-spacing":r.px(r.linkElement.css("letter-spacing")),"line-height":r.px(r.linkElement.css("line-height"))});var d=m.defer();r.$evalAsync(function(){m.when(i.promise).then(function(){r.initStyles(r.layer,s),s.data("mpsl_positions",r.layer.position),r.data.settings.editMode&&r.linkingElement(r,s,!1),d.resolve()})}),a.push(d.promise),r.$watch("[data.settings.timer, currentIndex]",function(){parseInt(s.parents(".ms_repeater").data("currentIndex"))===parseInt(r.currentIndex)?r.data.settings.editMode||r.layer.applyLeave&&(r.layer.enter(),r.layer.applyLeave=!1):r.layer.applyLeave=!0,r.data.settings.timer?parseInt(s.parents(".ms_repeater").data("currentIndex"))===parseInt(r.currentIndex)&&(c.cancel(r.layer.layerTimerLeave),r.applyLAnimation(r,s)):(c.cancel(r.layer.layerTimerLeave),null!==r.layer.leaveDelay&&parseInt(s.parents(".ms_repeater").data("currentIndex"))===parseInt(r.currentIndex)&&(r.data.settings.editMode||(r.layer.layerTimerLeave=c(function(){r.layer.applyLeave=!1,c.cancel(r.layer.layerTimerLeave)},r.layer.leaveDelay))))},!0);var u=m.defer();m.all(a).then(function(){u.resolve(),i=m.defer(),s.parent().trigger("MPSLLayerCreate")}),r.deferred.push(u.promise),r.data.settings.editMode&&r.$watchCollection("[layer.src, layer.classes, layer.width, layer.link, layer.linkClasses]",function(){e?e=!1:m.all(n).then(function(){s.parent().trigger("MPSLLayerChange"),n=[],i=m.defer()})})}}}angular.module("motosliderApp").directive("msImageLayer",e),e.$inject=["$timeout","$q"]}(),function(){function e(o,d){return{restrict:"A",link:function(n,i,t){var r=!0,e=[],s=[];n.$watch("layer.title",function(){n.data.settings.editMode&&i.text(n.layer.title)}),n.layer.clArr=[],n.$watch("layer.classes",function(){var e;n.data.settings.editMode&&(n.layer.clArr.push(n.layer.classes),n.layer.clArr.forEach(function(e){i.removeClass(e)}),i.attr("style",""),i.addClass("ms_button_layer "+n.layer.classes),t.$set("positions",n.layer.position),i.css("opacity","1"),e=d.defer(),n.setElementPosition(i,n.layer,e),s.push(e.promise))}),n.$watch("layer.link",function(){n.data.settings.editMode&&t.$set("href",n.layer.link)}),n.$watch("layer.target",function(){n.data.settings.editMode&&t.$set("target",n.layer.target)}),i.addClass(n.layer.classes);var a;i.parents("#"+n.getCurrentScope());n.manipulate=function(e){var t,a=!1;for(t in e)a||angular.equals(n.layer[t],e[t])||(a=!0),n.layer[t]=e[t];a?(n.$apply(),n.layer.changed=!0,n.changeStyles(n.layer,i)):i.parent().trigger("MPSLLayerChange")},n.manipulateFontOptions=function(e){for(var t in e)e.hasOwnProperty(t)&&(n.layer.styles[n.layout][t]=e[t]);n.changeStyles(n.layer,i)},n.delete=function(e){n.data.slides[0].layers.splice(e.$index,1),n.$apply()},i.addClass(n.layer.classes),i.text(n.layer.title),i.addClass("ms_visible"),t.$set("target",n.layer.target),t.$set("href",n.layer.link),n.data.settings.editMode?i.css({opacity:1}):(i.addClass("ms_visible"),n.addLayerAnimation(n.layer,i)),n.initStyles(n.layer,i),i.data("mpsl_positions",n.layer.position),n.data.settings.editMode&&(a=d.defer(),n.setElementPosition(i,n.layer,a),e.push(a.promise)),n.$watch("[data.settings.timer, currentIndex]",function(){parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)?n.data.settings.editMode||n.layer.applyLeave&&(n.layer.enter(),n.layer.applyLeave=!1):n.layer.applyLeave=!0,n.data.settings.timer?parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(o.cancel(n.layer.layerTimerLeave),n.applyLAnimation(n,i)):(o.cancel(n.layer.layerTimerLeave),null!==n.layer.leaveDelay&&parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(n.data.settings.editMode||(n.layer.layerTimerLeave=o(function(){n.layer.applyLeave=!1,o.cancel(n.layer.layerTimerLeave)},n.layer.leaveDelay))))},!0);var l=d.defer();d.all(e).then(function(){l.resolve(),i.parent().trigger("MPSLLayerCreate")}),n.deferred.push(l.promise),n.data.settings.editMode&&n.$watchCollection("[layer.title, layer.classes, layer.link, layer.target]",function(e,t,a){r?r=!1:d.all(s).then(function(){i.parent().trigger("MPSLLayerChange"),s=[]})})}}}angular.module("motosliderApp").directive("msButtonLayer",e),e.$inject=["$timeout","$q"]}(),angular.module("motosliderApp").directive("msVideoLayer",videoLayerDirective),videoLayerDirective.$inject=["$timeout","$sce","$q","defaults"],angular.module("motosliderApp").directive("msVideoLayerSource",function(){return{restrict:"A",link:function(e,t,a){e.getSrc=function(e){return e.layer.src},e.getType=function(e){return e.layer.type},a.$set("format",e.getType(e)),a.$set("src",e.getSrc(e))}}}),function(){function e(C,k,L){return{restrict:"A",link:function(n,i,t){var a,e,r=!0,s=[],l=[],o=i.find("iframe"),d=L.defer(),u=d.promise,c=!1,m=!0;n.layer.default_preview_image=C.info.path+C.videoBackground,n.layer.typeChanged=n.layer.hasOwnProperty("typeChanged")&&n.layer.typeChanged,n.layer.created=!1;var g=n.layer.autoplay||n.data.settings.editMode;n.getYoutubeEnterAnimationLayer=function(e){return e.animation},n.getYoutubeLeaveAnimationLayer=function(e){return e.leaveAnimation},n.pixelerize=function(e){return parseInt(e)+"px"},n.layer.clArr=[],n.$watch("layer.classes",function(){var e;n.data.settings.editMode&&(n.layer.classes&&n.layer.clArr.push(n.layer.classes),n.layer.clArr.forEach(function(e){i.removeClass(e)}),i.attr("style",""),i.addClass("ms_youtube_layer"),n.layer.classes&&i.addClass(n.layer.classes),t.$set("positions",n.layer.position),i.css("opacity","1"),e=L.defer(),n.setElementPosition(i,n.layer,e),l.push(e.promise))});var p=L.defer();o.on("load",function(){p.resolve(),p=L.defer()});var y=p.promise;n.isThisSlideCurrent(i)&&g&&s.push(y),n.data.settings.editMode&&n.$watch("layer.src",function(){o.attr("src",n.getYoutubeSrc(n.layer)),y=p.promise,l.push(y)}),n.$watch("layer.poster",function(){n.data.settings.editMode&&n.setPreviewImage()});var f=n.$watch("layer.width",function(){i.css({width:n.layer.width[n.layout]}),f()}),h=n.$watch("layer.height",function(){i.css({height:n.layer.height[n.layout]}),h()});n.$watch("layer.controls",function(){n.data.settings.editMode&&o.attr("src",n.getYoutubeSrc(n.layer))}),n.manipulate=function(e){var t,a=!1;for(t in e.hasOwnProperty("type")&&!angular.equals(n.layer.type,e.type)&&(n.layer.typeChanged=!0),e)a||angular.equals(n.layer[t],e[t])||(a=!0),n.layer[t]=e[t];a?n.$apply():i.parent().trigger("MPSLLayerChange"),n.layer.changed=!0},n.setPreviewImage=function(){n.layer.poster.length?n.layer.preview_image=n.layer.poster:n.layer.preview_image=n.layer.default_preview_image},n.clickPreviewButton=function(){e=a||!n.detectMobile,n.stopPlayingTimer(),S(),L.when(u).then(function(){n.hidePreviewImage(),e&&(n.seekTo(0),a.playVideo())})},n.hidePreviewImage=function(){i.find(".ms_youtube_layer_preview_image").addClass("hidden")},n.showPreviewImage=function(){i.find(".ms_youtube_layer_preview_image").removeClass("hidden")},n.onLeaveSlide=function(){n.showPreviewImage()},n.delete=function(e){n.data.slides[0].layers.splice(e.$index,1),n.$apply()},n.percentage=function(e){return parseInt(e)+"%"},n.delayValidation=function(e){return parseInt(e)+"ms"},n.getWidth=function(e){return angular.isUndefined(e.width)||0===e.width.length?C.widthYoutube:e.width},n.getHeight=function(e){return angular.isUndefined(e.height)||0===e.height.length?C.heightYoutube:e.height},n.getYoutubeId=function(){var e=n.layer,t=e.src.match(/^(?:http(?:s)?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:(?:watch)?\?(?:.*&)?v(?:i)?=|(?:embed|v|vi|user)\/))([^\?&\"\'>]+)/);return null===t?null!==(e=e.src.match(/^[A-za-z0-9_-]{11}$/))?e[0]:"":angular.isArray(t)&&angular.isDefined(t[1])?t[1]:""},n.getYoutubeSrc=function(e){var t=n.getYoutubeId(),a=n.layer.controls?1:0;return location.protocol+"//www.youtube.com/embed/"+t+"?html5=1&enablejsapi=1&fs=1&rel=0&showinfo=0&controls="+a},o.attr("frameborder",0),o.attr("webkitallowfullscreen",!0),o.attr("mozallowfullscreen",!0),o.attr("allowfullscreen",!0),n.data.settings.editMode?i.css("opacity",1):(n.setPreviewImage(),n.addLayerAnimation(n.layer,i),i.addClass(n.layer.classes),i.css({width:n.layer.width[n.layout],height:n.layer.height[n.layout]}),void 0===window.youtubeShow&&(window.youtubeShow=!0)),n.initStyles(n.layer,i),i.data("mpsl_positions",n.layer.position);var v=L.defer();n.setElementPosition(i,n.layer,v),n.isThisSlideCurrent(i)&&s.push(v.promise);var w,S=function(){void 0===a&&(a=!0,o.attr("src",n.getYoutubeSrc(n.layer)),n.loadYoutubeApiScript(),L.all([window.mpslYTApiReady,y]).then(function(){a=new YT.Player(o[0].id),b(!0),g=!1}))};n.pauseVideo=function(e){angular.isUndefined(e)&&(e=!0),a&&L.when(u).then(function(){a.pauseVideo(),e&&n.showPreviewImage()}),n.layer.autoplay&&c&&(m=!1)},n.seekTo=function(e){a&&a.seekTo(e,!0)},n.applyPreferences=function(e){n.layer.mute?e.mute():e.unMute()},n.onReady=function(e){n.data.settings.editMode||(n.applyPreferences(e.target),n.arrYoutubePlayersState[o[0].id]=a.getPlayerState()),d.resolve()},n.onStateChange=function(e,t){n.arrYoutubePlayersState[o[0].id]=t.data,e&&(t.data===YT.PlayerState.PLAYING||t.data===YT.PlayerState.BUFFERING?n.data.settings.editMode||n.appliedPauses||n.stopPlayingTimer():t.data!==YT.PlayerState.PAUSED&&t.data!==YT.PlayerState.ENDED||!n.checkAllPlayers()||n.appliedPauses||n.data.settings.editMode||n.startPlayingTimer()),t.data===YT.PlayerState.ENDED&&n.layer.loop&&a.seekTo(0)},n.data.settings.editMode||(w=function(){n.isThisSlideCurrent(i)&&n.layer.autoplay&&!c&&(L.when(u).then(function(){m&&(n.hidePreviewImage(),a.playVideo())}),c=!0)},angular.forEach(C.leaveEventNamesArr,function(e){i[0].addEventListener(e,w,!1)}));var b=function(e){a.addEventListener("onReady",n.onReady),a.addEventListener("onStateChange",n.onStateChange.bind(void 0,e)),a.addEventListener("onError",function(){})};n.$watch("currentIndex",function(){n.isThisSlideCurrent(i)?n.data.settings.editMode||(n.layer.autoplay&&!c&&n.stopPlayingTimer(),angular.isDefined(n.slideLeaved)&&n.slideLeaved&&(n.slideLeaved=!1)):n.slideLeaved||(n.onLeaveSlide(),n.slideLeaved=!0)}),n.$watch("[data.settings.timer, currentIndex]",function(){n.isThisSlideCurrent(i)?(g&&S(),n.data.settings.editMode||n.layer.applyLeave&&(n.layer.enter(),n.layer.applyLeave=!1)):n.layer.applyLeave=!0,n.data.settings.timer?parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(k.cancel(n.layer.layerTimerLeave),n.applyLAnimation(n,i)):(k.cancel(n.layer.layerTimerLeave),null!==n.layer.leaveDelay&&parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(n.data.settings.editMode||(n.layer.layerTimerLeave=k(function(){n.layer.applyLeave=!1,k.cancel(n.layer.layerTimerLeave)},n.layer.leaveDelay))))},!0);var _=L.defer();L.all(s).then(function(){_.resolve(),n.layer.typeChanged||(n.layer.created=!0),i.parent().trigger(n.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),n.deferred.push(_.promise),n.data.settings.editMode&&n.$watchCollection("[layer.type, layer.src, layer.width, layer.height, layer.classes, layer.poster, layer.controls]",function(){r?r=!1:L.all(l).then(function(){i.parent().trigger("MPSLLayerChange"),l=[]})})}}}angular.module("motosliderApp").directive("msYoutubeLayer",e),e.$inject=["defaults","$timeout","$q"]}(),function(){function e(C,k,L){return{restrict:"A",link:function(n,i,t){var e,a,r=!0,s=[],l=[],o=L.defer(),d=!1,u=!1,c=!0,m=n.layer.autoplay||n.data.settings.editMode;n.layer.default_preview_image=C.info.path+C.videoBackground,n.vimeoPlayerReady=o.promise,n.layer.typeChanged=n.layer.hasOwnProperty("typeChanged")&&n.layer.typeChanged,n.layer.created=!1,n.slideLeaved=!1,n.elementId="mpsl-layer-vimeo-"+n.$id,i[0].id=n.elementId;var g=i.find("iframe");n.getVimeoEnterAnimationLayer=function(e){return e.animation},n.getVimeoLeaveAnimationLayer=function(e){return e.leaveAnimation},n.pixelerize=function(e){return parseInt(e)+"px"},n.layer.clArr=[],n.$watch("layer.classes",function(){var e;n.data.settings.editMode&&(n.layer.classes&&n.layer.clArr.push(n.layer.classes),n.layer.clArr.forEach(function(e){i.removeClass(e)}),i.attr("style",""),i.addClass("ms_vimeo_layer"),n.layer.classes&&i.addClass(n.layer.classes),t.$set("positions",n.layer.position),i.css("opacity","1"),e=L.defer(),n.data.settings.editMode&&n.setElementPosition(i,n.layer,e),l.push(e.promise))});var p=L.defer();g.on("load",function(){p.resolve(),p=L.defer()});var y=p.promise;n.isThisSlideCurrent(i)&&m&&s.push(y),n.data.settings.editMode&&n.$watch("layer.src",function(){g.attr("src",n.getVimeoSrc(n.layer)),y=p.promise,l.push(y)});var f=n.$watch("layer.width",function(){i.css({width:n.layer.width[n.layout]}),f()}),h=n.$watch("layer.height",function(){i.css({height:n.layer.height[n.layout]}),h()});n.$watch("layer.controls",function(){n.data.settings.editMode&&g.attr("src",n.getVimeoSrc(n.layer))}),n.$watch("layer.poster",function(){n.data.settings.editMode&&!r&&n.setPreviewImage()});function v(){d||(d=!0,g.attr("src",n.getVimeoSrc(n.layer)),m=!1)}n.setPreviewImage=function(){e=L.defer(),e.promise,n.layer.poster.length?(n.layer.preview_image=n.layer.poster,e.resolve()):n.layer.preview_image=n.layer.default_preview_image},n.clickPreviewButton=function(){a=d||!n.detectMobile,n.stopPlayingTimer(),v(),L.when(n.vimeoPlayerReady).then(function(){n.hidePreviewImage(),a&&w()})},n.hidePreviewImage=function(){i.find(".ms_vimeo_layer_preview_image").addClass("hidden")},n.showPreviewImage=function(){i.find(".ms_vimeo_layer_preview_image").removeClass("hidden")};var w=function(){S("play")};n.isPaused=function(){S("paused")},n.pauseVideo=function(e){angular.isUndefined(e)&&(e=!0),d&&L.when(n.vimeoPlayerReady).then(function(){S("pause"),e&&n.showPreviewImage()}),n.layer.autoplay&&u&&(c=!1)},n.seekTo=function(e){d&&L.when(n.vimeoPlayerReady).then(function(){S("seekTo",e)})},n.onLeaveSlide=function(){n.showPreviewImage()},n.currentTimer=n.data.settings.timer;var S=function(e,t){e={method:e};t&&(e.value=t),g[0].contentWindow.postMessage(JSON.stringify(e),n.getVimeoSrc(n.layer))};n.onReady=function(){n.arrVimeoPlayersState[n.elementId]="ready",S("addEventListener","play"),S("addEventListener","pause"),S("addEventListener","finish"),n.layer.loop?S("setLoop",!0):S("setLoop",!1),n.layer.mute?S("setVolume",1e-4):S("setVolume",1),o.resolve()},n.onPlay=function(){n.arrVimeoPlayersState[n.elementId]="play",n.data.settings.editMode||n.appliedPauses||n.stopPlayingTimer()},n.onPause=function(){n.arrVimeoPlayersState[n.elementId]="pause",n.data.settings.editMode||n.appliedPauses||!n.checkAllPlayers()||n.startPlayingTimer()},n.onFinish=function(){n.arrVimeoPlayersState[n.elementId]="finish",n.data.settings.editMode||n.appliedPauses||!n.checkAllPlayers()||n.startPlayingTimer()};n.onMessageReceived=function(e){if(function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(e.data)){e=JSON.parse(e.data);if(e.player_id===n.elementId)switch(e.event){case"ready":n.onReady();break;case"play":n.onPlay();break;case"pause":n.onPause();break;case"finish":n.onFinish()}}},n.data.settings.editMode||(window.addEventListener?window.addEventListener("message",n.onMessageReceived,!1):window.attachEvent("onmessage",n.onMessageReceived,!1)),n.data.settings.editMode||(n.animEndListener=function(){n.isThisSlideCurrent(i)&&n.layer.autoplay&&!u&&(L.when(n.vimeoPlayerReady).then(function(){c&&(n.hidePreviewImage(),w())}),u=!0)},angular.forEach(C.leaveEventNamesArr,function(e){i[0].addEventListener(e,n.animEndListener,!1)})),n.manipulate=function(e){var t,a=!1;for(t in e.hasOwnProperty("type")&&!angular.equals(n.layer.type,e.type)&&(n.layer.typeChanged=!0),e)a||angular.equals(n.layer[t],e[t])||(a=!0),n.layer[t]=e[t];a?n.$apply():i.parent().trigger("MPSLLayerChange"),n.layer.changed=!0},n.delete=function(e){n.data.slides[0].layers.splice(e.$index,1),n.$apply()},n.percentage=function(e){return parseInt(e)+"%"},n.delayValidation=function(e){return parseInt(e)+"ms"},n.getWidth=function(e){return angular.isUndefined(e.width)||0===e.width.length?C.widthVimeo:e.width},n.getHeight=function(e){return angular.isUndefined(e.height)||0===e.height.length?C.heightVimeo:e.height},n.getVimeoId=function(e){var t=e.toString().match(/^(?:https?:\/\/|)(?:www\.|player\.|)vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:\/|\?|\#\w*|)$/);return null===t?(e=e.toString().match(/^\d+$/),angular.isArray(e)&&angular.isDefined(e[0])?e[0]:""):angular.isArray(t)&&angular.isDefined(t[1])?t[1]:""},n.getVimeoSrc=function(e){return"https://player.vimeo.com/video/"+n.getVimeoId(e.src)+"?api=1&player_id="+n.elementId+"&badge=0&title=0&portrait=0&byline=0"},g.attr("frameborder",0),g.attr("webkitallowfullscreen",!0),g.attr("mozallowfullscreen",!0),g.attr("allowfullscreen",!0),n.setPreviewImage(),n.data.settings.editMode?i.css("opacity",1):(n.addLayerAnimation(n.layer,i),i.addClass(n.layer.classes),i.css({width:n.layer.width[n.layout],height:n.layer.height[n.layout]})),n.initStyles(n.layer,i),i.data("mpsl_positions",n.layer.position);var b=L.defer();n.setElementPosition(i,n.layer,b),n.isThisSlideCurrent(i)&&s.push(b.promise),n.$watch("currentIndex",function(){n.isThisSlideCurrent(i)?(m&&v(),n.data.settings.editMode||n.layer.autoplay&&!u&&n.stopPlayingTimer(),angular.isDefined(n.slideLeaved)&&n.slideLeaved&&(n.slideLeaved=!1)):n.slideLeaved||(n.onLeaveSlide(),n.slideLeaved=!0)}),n.$watch("[data.settings.timer, currentIndex]",function(){n.isThisSlideCurrent(i)?n.data.settings.editMode||n.layer.applyLeave&&(n.layer.enter(),n.layer.applyLeave=!1):n.layer.applyLeave=!0,n.data.settings.timer?parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(k.cancel(n.layer.layerTimerLeave),n.applyLAnimation(n,i)):(k.cancel(n.layer.layerTimerLeave),null!==n.layer.leaveDelay&&parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(n.data.settings.editMode||(n.layer.layerTimerLeave=k(function(){n.layer.applyLeave=!1,k.cancel(n.layer.layerTimerLeave)},n.layer.leaveDelay))))},!0);var _=L.defer();L.all(s).then(function(){_.resolve(),n.layer.typeChanged||(n.layer.created=!0),i.parent().trigger(n.layer.typeChanged?"MPSLLayerChange":"MPSLLayerCreate")}),n.deferred.push(_.promise),n.data.settings.editMode&&n.$watchCollection("[layer.type, layer.src, layer.width, layer.height, layer.classes, layer.poster]",function(){r?r=!1:L.all(l).then(function(){i.parent().trigger("MPSLLayerChange"),l=[]})})}}}angular.module("motosliderApp").directive("msVimeoLayer",e),e.$inject=["defaults","$timeout","$q"]}(),function(){function e(g,p,e,y,f,t){return{restrict:"A",link:function(n,i,t){var r=!0,e=[],s=[],a=new RegExp("\\b"+f.whiteSpacePrefix+"[a-zA-Z0-9]+\\b","g"),l=y.defer();e.push(l.promise),n.$watch("layer.content",function(){var e=n.imagesLoaded(i);r?!0===e?l.resolve():e.then(function(){l.resolve()}):!0!==e&&s.push(e)}),n.layer.clArr=[],angular.forEach(f.whiteSpaceVariations,function(e){n.layer.clArr.push(f.whiteSpacePrefix+e)}),n.$watch("layer.classes",function(){var e;n.data.settings.editMode&&(e=n.layer.classes.split(" ").filter(function(e){return!!e.trim().length}),n.layer.clArr=n.layer.clArr.concat(e.filter(function(e){return n.layer.clArr.indexOf(e)<0})),i.removeClass(n.layer.clArr.join(" ")),i.attr("style",""),i.addClass("ms_html_layer "+n.layer.classes),u(n.layer.whiteSpace[n.layout]),t.$set("positions",n.layer.position),i.css("opacity","1"),e=y.defer(),n.setElementPosition(i,n.layer,e),s.push(e.promise))});var o,d=n.$watch("layer.width",function(){""!==n.layer.width[n.layout]&&i.css({width:n.layer.width[n.layout]}),d()}),u=function(e){var t=(t=i.attr("class")).replace(a,"").trim()+" "+f.whiteSpacePrefix+e;i.attr("class",t)};n.$watch("layer.whiteSpace",function(e){u(e[n.layout])},!0),n.data.settings.editMode||n.$watch("layout",function(){r||n.manipulateSingle("whiteSpace",n.layer.whiteSpace[n.layout])}),n.manipulateSingle=function(e,t){"whiteSpace"===e&&(n.layer.whiteSpace[n.layout]=t,u(t))},n.manipulate=function(e){var t,a=!1;for(t in e)a||angular.equals(n.layer[t],e[t])||(a=!0),n.layer[t]=e[t];a?(n.trustHtmlContent(),n.$apply(),n.layer.changed=!0,n.changeStyles(n.layer,i)):i.parent().trigger("MPSLLayerChange",[!0])},n.manipulateFontOptions=function(e){for(var t in e)e.hasOwnProperty(t)&&(n.layer.styles[n.layout][t]=e[t]);var a=i.find("*:not(br,hr)");a.length&&angular.forEach(a,function(e){n.changeStyles(n.layer,angular.element(e),!0,!0)}),n.changeStyles(n.layer,i,!1,!0)},n.delete=function(e){n.data.slides[0].layers.splice(e.$index,1),n.$apply()},n.trustHtmlContent=function(){"string"==typeof n.layer.content&&(n.trustedHtml=g.trustAsHtml(n.layer.content))},n.trustHtmlContent(),n.data.settings.editMode?i.css("opacity",1):n.addLayerAnimation(n.layer,i),i.addClass(n.layer.classes),n.initStyles(n.layer,i),i.data("mpsl_positions",n.layer.position),n.data.settings.editMode&&(o=y.defer(),n.setElementPosition(i,n.layer,o),e.push(o.promise)),n.$watch("[data.settings.timer, currentIndex]",function(){parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)?n.data.settings.editMode||n.layer.applyLeave&&(n.layer.enter(),n.layer.applyLeave=!1):n.layer.applyLeave=!0,n.data.settings.timer?parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(p.cancel(n.layer.layerTimerLeave),n.applyLAnimation(n,i)):(p.cancel(n.layer.layerTimerLeave),null!==n.layer.leaveDelay&&parseInt(i.parents(".ms_repeater").data("currentIndex"))===parseInt(n.currentIndex)&&(n.data.settings.editMode||(n.layer.layerTimerLeave=p(function(){n.layer.applyLeave=!1,p.cancel(n.layer.layerTimerLeave)},n.layer.leaveDelay))))},!0);var c=y.defer();y.all(e).then(function(){c.resolve(),i.parent().trigger("MPSLLayerCreate"),s=[]}),n.deferred.push(c.promise);var m=n.$watchCollection("[layer.content, layer.classes, layer.width, layer.whiteSpace]",function(e,t,a){n.data.settings.editMode?r||(y.all(s).then(function(){i.parent().trigger("MPSLLayerChange",[!1]),s=[]}),s=[]):m(),r=!1})}}}angular.module("motosliderApp").directive("msHtmlLayer",e),e.$inject=["$sce","$timeout","$interval","$q","defaults","$rootElement"]}(),function(){function e(a){return{restrict:"A",link:function(e,t){e.setTimerSeconds(),angular.element(t).bind("click",function(){e.data.settings.isSlideshowEnabled=!0,e.data.settings.timer?(t.removeClass("ms_pause"),e.data.settings.timer=!1,e.tempTimerForVideo=!1,e.stopTimer(),a.cancel(e.motoTimer)):(e.data.settings.timer=!0,e.tempTimerForVideo=!0,t.addClass("ms_pause"),e.startTimer()),e.$apply()})}}}angular.module("motosliderApp").directive("msStartPause",e),e.$inject=["$timeout"]}(),angular.module("motosliderApp").directive("navigationControl",function(){return{restrict:"A",link:function(t,e,a){angular.element(e).bind("click",function(){var e=a.navigationControl;e&&e.length&&(t.quickScroll=!1,MPSLManager.swiped=!1,"next"===e?t.nextSlide(!0):"prev"===e&&t.prevSlide(!0),t.$apply())})}}}),angular.module("motosliderApp").directive("paginationControl",function(){return{link:function(a,n,i){angular.element(n).bind("click",function(){var e=angular.element(n),t=e.siblings();parseInt(i.index)===parseInt(a.currentIndex)?(e.addClass("ms_active"),t.removeClass("ms_active")):e.removeClass("ms_active")})}}}),function(){function e(e,t,f){return{restrict:"A",link:function(p,y){e.when(p.sliderLoaded).then(function(){var a,n,r,s,i,l,o,d,u,c,m,g=0,e=!(!p.data.settings.swipe||!p.detectMobile)||(!(p.data.settings.swipe||!p.detectMobile)||!(!p.data.settings.swipe||p.detectMobile));e&&!p.data.settings.editMode&&1<p.data.settings.countSlides&&(y.addClass("ms_grab"),y.on("mousedown",function(){angular.element(this).addClass("ms_grabbing")}),y.on("mouseup",function(){angular.element(this).removeClass("ms_grabbing")}),s=function(e,t){e.css({"-webkit-transition-duration":p.ms(t),"-moz-transition-duration":p.ms(t),"-ms-transition-duration":p.ms(t),"transition-duration":p.ms(t)})},i=function(e,t){e.css({"-webkit-transform":"translate3D("+t+", 0, 0)","-moz-transform":"translate3D("+t+", 0, 0)","-ms-transform":"translate3D("+t+", 0, 0)",transform:"translate3D("+t+", 0, 0)"})},l=function(e,t){e.css({opacity:t})},o=function(){"msSlideFade"!==p.animationType&&(p.firstSlideEnded=!0,i(p.tempSlides.currentElement,p.percentage(-100)),s(p.tempSlides.currentElement,f.swipeTransitionDuration),i(p.tempSlides.nextElement,p.percentage(0)),s(p.tempSlides.nextElement,f.swipeTransitionDuration)),p.nextSlide(!0)},d=function(){"msSlideFade"!==p.animationType&&(p.firstSlideEnded=!0,i(p.tempSlides.currentElement,p.percentage(100)),s(p.tempSlides.currentElement,f.swipeTransitionDuration),i(p.tempSlides.prevElement,p.percentage(0)),s(p.tempSlides.prevElement,f.swipeTransitionDuration)),p.prevSlide(!0)},u=function(e){MPSLManager.swiped=!0,p.quickScroll=!0,i(p.tempSlides.currentElement,p.percentage(0)),s(p.tempSlides.currentElement,f.swipeTransitionDuration)},c=function(){n?(i(p.tempSlides.nextElement,p.percentage(100)),s(p.tempSlides.nextElement,f.swipeTransitionDuration)):(i(p.tempSlides.prevElement,p.percentage(-100)),s(p.tempSlides.prevElement,f.swipeTransitionDuration))},e=function(e,t){var a,n,i;p.enableSwipe=!!(t.timeStamp-r>f.swipeTimeLimit||isNaN(r)),p.enableSwipe&&(r=t.timeStamp,g=e.x,a=angular.element(t.target),p.quickScroll=!0,p.tempSlides=(n=p.currentIndex,i=0==n?p.data.settings.countSlides-1:n-1,e=n==p.data.settings.countSlides-1?0:n+1,(n={currentElement:y.find('[data-current-index="'+n+'"]'),prevElement:y.find('[data-current-index="'+i+'"]'),nextElement:y.find('[data-current-index="'+e+'"]')}).doubleSlide=i===e,n),p.animationType=p.tempSlides.currentElement.find(".ms_slide_wrapper").attr("enter-animation"),(a.hasClass("ms_next")||a.hasClass("ms_prev")||a.hasClass("ms_bullet"))&&m(),"msSlideFade"!==p.animationType&&(s(p.tempSlides.nextElement,0),p.tempSlides.doubleSlide||s(p.tempSlides.prevElement,0)),p.delta=0,p.startSwipeTime=t.timeStamp)},m=function(e,t){},t.bind(y,{start:e,move:function(e,t){p.delta=g-e.x,p.enableSwipe&&"msSlideFade"!==p.animationType&&(a=-p.delta,(5<p.delta||p.delta<-5)&&(s(p.tempSlides.currentElement,0),i(p.tempSlides.currentElement,p.px(a))),p.swipeDifferenceX=e.x-g,5<p.delta?(n=!0,i(p.tempSlides.nextElement,p.px(p.currentWidth+a)),l(p.tempSlides.nextElement,1),p.tempSlides.doubleSlide||l(p.tempSlides.prevElement,0)):p.delta<-5?(n=!1,i(p.tempSlides.prevElement,p.px(-p.currentWidth+a)),l(p.tempSlides.prevElement,1),p.tempSlides.doubleSlide||l(p.tempSlides.nextElement,0)):p.delta<5&&-5<p.delta&&(l(p.tempSlides.nextElement,0),l(p.tempSlides.prevElement,0)))},end:function(e,t){var a;p.enableSwipe&&(a=t.timeStamp-p.startSwipeTime,"msSlideFade"!==p.animationType&&u(),t=p.currentWidth/f.swipeWidthLimit,"msSlideFade"!==p.animationType?p.delta>t?o():p.delta<-t?d():p.delta<t&&p.delta>-t&&0!==p.delta?a<f.swipeTime?((p.delta<0?d:o)(),p.startSwipeTime=0):c():(m(),p.tempSlides.currentElement.css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, 0)","-moz-transform":"matrix(1, 0, 0, 1, 0, 0)","-ms-transform":"matrix(1, 0, 0, 1, 0, 0)",transform:"matrix(1, 0, 0, 1, 0, 0)"}),s(p.tempSlides.currentElement,0),p.tempSlides.currentElement.addClass(f.animatedClass)):0!==p.delta&&(p.delta<0?d:o)(),p.enableSwipe=!1)},cancel:m}),y.on("mouseleave",function(){p.enableSwipe&&"msSlideFade"!==p.animationType&&(p.enableSwipe=!1,u(),c(),y.removeClass("ms_grabbing"))}),y.find(".ms_slide").on("click mousedown",function(e){0!==p.delta&&e.preventDefault()}))})}}}angular.module("motosliderApp").directive("msSwipe",e),e.$inject=["$q","$swipe","defaults"]}(),function(){function e(e,a){function n(e){return{enter:(e=e.find(".ms_slide_wrapper")).attr("enter-animation"),leave:e.attr("leave-animation"),duration:e.attr("duration"),easing:e.attr("easing")}}function i(e,t,a){e.find(t.join(",")).css("opacity",a)}function r(e,t){"msSlideFade"===t.enter?(e.hasClass("ms_show")&&e.removeClass("ms_show"),e.css({"transition-property":"opacity","-webkit-transition-property":"opacity","-moz-transition-property":"opacity","-ms-transition-property":"opacity"}),e.css({"transition-duration":t.duration+"ms","-webkit-transition-duration":t.duration+"ms","-moz-transition-duration":t.duration+"ms","-ms-transition-duration":t.duration+"ms"})):e.css({"animation-duration":t.duration+"ms","-webkit-animation-duration":t.duration+"ms","-moz-animation-duration":t.duration+"ms","-ms-animation-duration":t.duration+"ms"}),e.addClass("mpsl-"+t.easing)}var s="true"===e.find(".motoslider>#settings").attr("data-edit-mode");return{removeClass:function(e){var t;s||(e.addClass("ms_active"),e.removeClass("ms_prev_slide"),e.addClass("ms_current_slide"),i(e,[".ms_layer"],0),t=n(e),e.removeClass(a.animatedClass+" "+t.leave),e.find(".ms_image").addClass("ms_optimize"),MPSLManager.swiped||t&&(e.addClass(a.animatedClass).addClass(t.enter),r(e,t)))},addClass:function(e){var t;s||(0!==(t=(t=e).find("video")).length&&t.each(function(e,t){t.pause()}),e.removeClass("ms_active"),i(e,[".ms_layer"],1),e.removeClass("ms_current_slide"),t=n(e),e.removeClass(t.enter),"msSlideFade"!==t.enter&&(e.siblings(".ms_slide").css("opacity",0),e.css("opacity",1)),MPSLManager.swiped||t&&(e.addClass(a.animatedClass).addClass(t.enter),r(e,t)))}}}angular.module("motosliderApp").animation(".ms_repeater",e),e.$inject=["$rootElement","defaults"]}();